# Rice Search - Go Edition
# Development Docker Compose - Only Qdrant (run server from code locally)
# Data resets on `docker-compose down`

services:
  # ===========================================================================
  # Qdrant Vector Database (Ephemeral - no persistence)
  # Dashboard: http://localhost:6333/dashboard
  # ===========================================================================
  qdrant:
    image: qdrant/qdrant:v1.12.4
    container_name: rice-qdrant-dev
    ports:
      - "6333:6333"   # HTTP API + Dashboard
      - "6334:6334"   # gRPC API
    environment:
      - QDRANT__SERVICE__GRPC_PORT=6334
      - QDRANT__LOG_LEVEL=DEBUG
    tmpfs:
      - /qdrant/storage:size=2G
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:6333/healthz"]
      interval: 5s
      timeout: 3s
      retries: 5
      start_period: 5s

networks:
  default:
    name: rice-dev-network
