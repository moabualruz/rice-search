/usr/local/lib/python3.11/site-packages/celery/platforms.py:841: SecurityWarning: You're running the worker with superuser privileges: this is
absolutely not recommended!

Please specify a different user using the --uid option.

User information: uid=0 euid=0 gid=0 egid=0

  warnings.warn(SecurityWarning(ROOT_DISCOURAGED.format(
Starting Celery worker with pool=threads, concurrency=10
 
 -------------- celery@f63ac3f32946 v5.6.1 (recovery)
--- ***** ----- 
-- ******* ---- Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.41 2026-01-03 06:17:35
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         rice_worker:0x7e0ba1101810
- ** ---------- .> transport:   redis://redis:6379/0
- ** ---------- .> results:     redis://redis:6379/0
- *** --- * --- .> concurrency: 10 (thread)
-- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .> celery           exchange=celery(direct) key=celery
                

[tasks]
  . src.tasks.ingestion.ingest_file_task
  . src.tasks.ingestion.rebuild_index_task
  . src.worker.celery_app.echo_task

[2026-01-03 06:17:35,141: INFO/MainProcess] Connected to redis://redis:6379/0

worker: Warm shutdown (MainProcess)
Starting Celery worker with pool=threads, concurrency=10
 
 -------------- celery@f63ac3f32946 v5.6.1 (recovery)
[2026-01-03 06:17:35,143: INFO/MainProcess] mingle: searching for neighbors
[2026-01-03 06:17:36,149: INFO/MainProcess] mingle: all alone
[2026-01-03 06:17:36,159: INFO/MainProcess] celery@f63ac3f32946 ready.
/usr/local/lib/python3.11/site-packages/celery/platforms.py:841: SecurityWarning: You're running the worker with superuser privileges: this is
absolutely not recommended!

Please specify a different user using the --uid option.

User information: uid=0 euid=0 gid=0 egid=0

  warnings.warn(SecurityWarning(ROOT_DISCOURAGED.format(
--- ***** ----- 
-- ******* ---- Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.41 2026-01-03 06:23:15
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         rice_worker:0x710a723b14d0
- ** ---------- .> transport:   redis://redis:6379/0
- ** ---------- .> results:     redis://redis:6379/0
- *** --- * --- .> concurrency: 10 (thread)
-- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .> celery           exchange=celery(direct) key=celery
                

[tasks]
  . src.tasks.ingestion.ingest_file_task
  . src.tasks.ingestion.rebuild_index_task
  . src.worker.celery_app.echo_task

[2026-01-03 06:23:15,956: INFO/MainProcess] Connected to redis://redis:6379/0
[2026-01-03 06:23:15,958: INFO/MainProcess] mingle: searching for neighbors
[2026-01-03 06:23:16,965: INFO/MainProcess] mingle: all alone
[2026-01-03 06:23:16,976: INFO/MainProcess] celery@f63ac3f32946 ready.
[2026-01-03 06:25:40,895: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1a7038a9-75b5-4338-a5f3-aae3879e239c] received
[2026-01-03 06:25:40,900: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[72145853-db71-4ae7-9efa-a97035158e8a] received
[2026-01-03 06:25:40,905: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9b8ce85c-aaaf-41b1-9bcb-c091cb2abc2b] received
[2026-01-03 06:25:40,911: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b5b13633-e47e-4e10-828c-d27d4a3ff297] received
[2026-01-03 06:25:40,917: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ceea0ed6-7375-4394-a54f-b33c90538d88] received
[2026-01-03 06:25:40,926: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[480b2d9d-6ef3-4c19-ae8f-31bedade1776] received
[2026-01-03 06:25:40,932: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f8e68c48-5fb4-4aa9-b4d7-cb4e8e8e7391] received
[2026-01-03 06:25:40,941: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20aa2802-6e16-4696-8e4b-6dc280ae4f0d] received
[2026-01-03 06:25:40,951: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8c61c093-ea36-4999-9425-ca222425fc62] received
[2026-01-03 06:25:40,964: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[68ff70e2-f72c-4b4e-bfcc-b264d1fcfe16] received
[2026-01-03 06:25:40,975: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[820102a8-1046-4462-bd24-eaed4d1682e6] received
[2026-01-03 06:25:40,981: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e070e502-f906-44d5-b675-d6cd7f652e05] received
[2026-01-03 06:25:40,987: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[838a01be-0d52-457c-9939-ff040aa932ed] received
[2026-01-03 06:25:40,994: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c8f6c4a-181d-4d88-830b-99eb4bebd839] received
[2026-01-03 06:25:41,002: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ecb41869-88e5-4d94-9d21-96d1ba47f38f] received
[2026-01-03 06:25:41,009: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2a8fe019-50bf-45cc-9dbf-dbad827e941a] received
[2026-01-03 06:25:41,017: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b1e94e8d-18c5-4bac-8d56-64856504ad5a] received
[2026-01-03 06:25:41,028: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ceac67dc-cccd-47f2-a566-7fd2519f97ef] received
[2026-01-03 06:25:41,047: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dc68228f-c6c2-401c-83c6-4586310891d7] received
[2026-01-03 06:25:41,102: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dff2aea7-be36-432f-b6b8-f606daefdd8e] received
[2026-01-03 06:25:41,158: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[98147760-5e63-4826-9253-3f8eb8c03f0a] received
[2026-01-03 06:25:41,213: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d7b6220b-f747-4676-84b6-54224662fcaa] received
[2026-01-03 06:25:41,321: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,321: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,321: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,323: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,340: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[70a77dfc-785a-47aa-ad69-a62b28cd679f] received
[2026-01-03 06:25:41,411: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,429: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[73e23216-054f-4511-9e4a-d654844e76eb] received
[2026-01-03 06:25:41,430: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b46b27b1-b8bf-4b77-b4ff-8d5dbeca4d3f] received
[2026-01-03 06:25:41,430: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a9db3666-16b9-4a79-8a68-3605c91bd340] received
[2026-01-03 06:25:41,431: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f1e9733a-31c8-4366-8fd2-3fcfae860a4d] received
[2026-01-03 06:25:41,478: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e7bf9ff5-9ada-4863-aa0c-cfad407a9284] received
[2026-01-03 06:25:41,543: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1c7edc92-0f14-4460-81f2-7c9f84b5d602] received
[2026-01-03 06:25:41,566: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e5608e2c-f066-4184-807c-f5a6f1210bf8] received
[2026-01-03 06:25:41,589: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[387f909e-21c2-4a01-9316-c9f3794bfeef] received
[2026-01-03 06:25:41,603: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c90e63de-750f-46da-9578-4fbd7c5c3abc] received
[2026-01-03 06:25:41,605: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6020cf44-998a-4b58-9294-395eff89ae75] received
[2026-01-03 06:25:41,605: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[90e07b41-5ecc-4ac9-a22e-cbe1293c8824] received
[2026-01-03 06:25:41,606: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[78eddf5f-1e30-43a9-916e-6a1e2956a885] received
[2026-01-03 06:25:41,607: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5f762db2-72d2-48fd-bd18-915e8adcae54] received
[2026-01-03 06:25:41,608: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba300b96-5b7a-4c2c-88aa-4243baf34563] received
[2026-01-03 06:25:41,609: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e2107242-0339-44a0-a64f-969315386dd4] received
[2026-01-03 06:25:41,610: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20e848b1-6886-41fc-846d-ba20103f31e0] received
[2026-01-03 06:25:41,611: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dbb97689-e548-4d98-a053-2dd3935946b0] received
[2026-01-03 06:25:41,613: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e739648e-b432-4ef2-ae35-71e7a8523888] received
[2026-01-03 06:25:41,614: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a61cf6c7-2fd7-46ae-9cdc-422708184a9f] received
[2026-01-03 06:25:41,615: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[983b0f2b-815c-47cd-b99c-6693d6cc2f32] received
[2026-01-03 06:25:41,616: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ee7b1f98-d403-42b8-a6f9-13ee2a11caf2] received
[2026-01-03 06:25:41,616: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[08c97d70-d701-4d2a-9123-dc0e59970386] received
[2026-01-03 06:25:41,617: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ca83456e-023e-4809-8045-a4dbd88cf32b] received
[2026-01-03 06:25:41,619: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[976304c5-4d72-4927-b227-6b6ee76ce8a6] received
[2026-01-03 06:25:41,619: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[12835c09-0b32-4782-aa22-66e9af148f4e] received
[2026-01-03 06:25:41,620: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8f91fe9a-dbd7-4e55-8d78-bfd447a6a06e] received
[2026-01-03 06:25:41,621: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[19169ea3-68d0-402a-89be-cfc371f70572] received
[2026-01-03 06:25:48,431: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b5b13633-e47e-4e10-828c-d27d4a3ff297] succeeded in 7.518409638999998s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,431: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20aa2802-6e16-4696-8e4b-6dc280ae4f0d] succeeded in 7.489114551s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,453: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:48,453: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:48,457: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[480b2d9d-6ef3-4c19-ae8f-31bedade1776] succeeded in 7.530048004999998s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,458: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:48,459: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:48,471: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e070e502-f906-44d5-b675-d6cd7f652e05] succeeded in 0.03988551500000881s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,473: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:48,473: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:48,476: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[68ff70e2-f72c-4b4e-bfcc-b264d1fcfe16] succeeded in 7.5107752940000125s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,479: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c8f6c4a-181d-4d88-830b-99eb4bebd839] succeeded in 0.007663390999994135s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,756: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:48,756: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,788: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:48,789: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:48,789: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,790: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,802: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9b8ce85c-aaaf-41b1-9bcb-c091cb2abc2b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,802: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[72145853-db71-4ae7-9efa-a97035158e8a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,802: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1a7038a9-75b5-4338-a5f3-aae3879e239c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,816: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:48,832: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ceac67dc-cccd-47f2-a566-7fd2519f97ef] succeeded in 0.009536814999989929s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,834: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:48,843: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dc68228f-c6c2-401c-83c6-4586310891d7] succeeded in 0.009335125000006883s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,847: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dff2aea7-be36-432f-b6b8-f606daefdd8e] succeeded in 0.012520012999999608s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,848: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:48,849: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,850: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[98147760-5e63-4826-9253-3f8eb8c03f0a] succeeded in 0.006506392999995114s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,853: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d7b6220b-f747-4676-84b6-54224662fcaa] succeeded in 0.005997920000027079s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,855: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[70a77dfc-785a-47aa-ad69-a62b28cd679f] succeeded in 0.004237431000007064s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,858: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[73e23216-054f-4511-9e4a-d654844e76eb] succeeded in 0.004180253000015455s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,859: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b46b27b1-b8bf-4b77-b4ff-8d5dbeca4d3f] succeeded in 0.00382884600000466s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,862: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a9db3666-16b9-4a79-8a68-3605c91bd340] succeeded in 0.0036473000000114553s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,864: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b1e94e8d-18c5-4bac-8d56-64856504ad5a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,865: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f1e9733a-31c8-4366-8fd2-3fcfae860a4d] succeeded in 0.005536291999987952s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,866: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e7bf9ff5-9ada-4863-aa0c-cfad407a9284] succeeded in 0.0046486429999959s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,889: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1c7edc92-0f14-4460-81f2-7c9f84b5d602] succeeded in 0.014577878000011424s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,898: WARNING/MainProcess] Failed to load parser for python: __init__() takes exactly 1 argument (2 given)
[2026-01-03 06:25:49,182: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[12560e45-3ac2-482d-96d9-0055378fce1e] received
[2026-01-03 06:25:49,183: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e57dc356-fae8-4baf-97e5-66b8bb548553] received
[2026-01-03 06:25:49,184: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6a726c6d-301b-440f-893e-2a212d5dcb23] received
[2026-01-03 06:25:49,185: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9768d6d0-16de-45f9-bb90-17b9c5840ac3] received
[2026-01-03 06:25:49,185: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[862c8220-ec94-4b71-80d6-a8a92f80a14f] received
[2026-01-03 06:25:49,186: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3973f1fe-6cd3-40d4-a58c-b156e10d8e5a] received
[2026-01-03 06:25:49,187: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9768a93d-0490-4cfa-bf2d-0a33715316aa] received
[2026-01-03 06:25:49,188: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[739a2043-04bb-4c44-85b4-72e260d27dd3] received
[2026-01-03 06:25:49,188: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[61332a66-0024-401c-b3ab-4225be99cb68] received
[2026-01-03 06:25:49,189: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6392cd40-d034-4755-8bd1-e0e6f4d229e7] received
[2026-01-03 06:25:49,190: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0db2882e-f62b-4333-9d1f-96186177fa66] received
[2026-01-03 06:25:49,192: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[85ac02c3-984f-4ef0-bcde-2a5efff5c77c] received
[2026-01-03 06:25:49,193: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[69f1d88d-c48e-4d10-9013-0a740b796b21] received
[2026-01-03 06:25:49,194: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e6e3e5be-6351-4baf-8d2c-e3196929e538] received
[2026-01-03 06:25:49,194: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[39c6b0f9-c543-4f54-9f0c-d9c583aa15db] received
[2026-01-03 06:25:49,195: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b88cf86f-90a2-48d8-96a3-66ca03e3d55b] received
[2026-01-03 06:25:49,196: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5ce9ef12-c941-461e-a537-61374a574337] received
[2026-01-03 06:25:49,196: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4988b448-3e09-4cb3-8df2-0a1ca32e843e] received
[2026-01-03 06:25:49,197: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1747bb6e-0e95-4c06-90bd-560253515a5a] received
[2026-01-03 06:25:49,198: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[831db29c-fd15-452d-9a0c-d30b8bf9c97b] received
[2026-01-03 06:25:49,199: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[897e0e5f-d990-42c8-b33c-d51fa3b36061] received
[2026-01-03 06:25:49,199: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[73a90999-2c9a-45a9-8a2a-f1119b8e0327] received
[2026-01-03 06:25:49,596: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8c61c093-ea36-4999-9425-ca222425fc62] succeeded in 8.644076665s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,596: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ceea0ed6-7375-4394-a54f-b33c90538d88] succeeded in 8.676859680999996s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,597: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ecb41869-88e5-4d94-9d21-96d1ba47f38f] succeeded in 1.1199925690000043s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,599: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[838a01be-0d52-457c-9939-ff040aa932ed] succeeded in 1.1420267050000064s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,600: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:49,601: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:49,602: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[820102a8-1046-4462-bd24-eaed4d1682e6] succeeded in 1.1711840610000195s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,603: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f8e68c48-5fb4-4aa9-b4d7-cb4e8e8e7391] succeeded in 8.667372408000006s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,608: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:49,672: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:49,721: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,140: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,359: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,412: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,412: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,415: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,417: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,432: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,433: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,506: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,507: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,529: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,533: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,537: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,548: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,550: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,551: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,551: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e2107242-0339-44a0-a64f-969315386dd4] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,552: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ea5df6ae-c8b2-46a3-b3c1-cca1bff13448] received
[2026-01-03 06:25:50,559: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,563: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,563: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,564: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,564: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,564: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,568: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:50,600: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,616: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,626: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:50,626: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,633: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:50,633: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20737299-5221-48bc-a9e0-42f736143a05] received
[2026-01-03 06:25:50,634: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,635: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,636: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,637: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:50,637: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,640: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,645: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,646: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[eae047a6-bc88-48b6-b42b-b9bba80faf51] received
[2026-01-03 06:25:50,654: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,658: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,659: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,666: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,668: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,669: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[91d814b3-d97c-4342-b19d-777da7a3b274] received
[2026-01-03 06:25:50,674: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,676: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,679: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,684: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,686: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f7e1edf8-31c7-45e7-b902-2ebe2d7eda1a] received
[2026-01-03 06:25:50,687: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,687: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,690: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,701: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:50,706: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,702: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,705: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a995acb4-4f72-48ea-a184-e0a4e8d29673] received
[2026-01-03 06:25:50,706: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[c90e63de-750f-46da-9578-4fbd7c5c3abc] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,702: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e5608e2c-f066-4184-807c-f5a6f1210bf8] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,707: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[90e07b41-5ecc-4ac9-a22e-cbe1293c8824] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,709: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[78eddf5f-1e30-43a9-916e-6a1e2956a885] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,716: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[12bb4d9b-5341-4631-a400-0833e2ee3b57] received
[2026-01-03 06:25:50,717: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[5f762db2-72d2-48fd-bd18-915e8adcae54] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,726: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,729: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[6020cf44-998a-4b58-9294-395eff89ae75] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,732: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba300b96-5b7a-4c2c-88aa-4243baf34563] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,791: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:50,791: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,819: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,085: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,828: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:50,829: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,832: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:50,851: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,083: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,084: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,821: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e30e871e-a9a7-4e3e-9ab8-2a7109ce1834] received
[2026-01-03 06:25:51,086: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,086: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,110: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,112: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,121: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,121: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,127: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[20e848b1-6886-41fc-846d-ba20103f31e0] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,131: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[84aa799b-01fc-4b8d-a6aa-1da3d64ec71f] received
[2026-01-03 06:25:51,131: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,132: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,143: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,156: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,161: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e739648e-b432-4ef2-ae35-71e7a8523888] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,161: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a61cf6c7-2fd7-46ae-9cdc-422708184a9f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,162: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,165: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,177: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,182: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,187: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:51,192: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,192: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,193: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f770a4d2-5fd0-46fe-922a-dd81339176d0] received
[2026-01-03 06:25:51,206: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,221: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,222: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,222: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,258: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:51,259: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,260: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fe582376-ea84-463b-b3c1-e82d9c0d817b] received
[2026-01-03 06:25:51,260: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[dbb97689-e548-4d98-a053-2dd3935946b0] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,262: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[983b0f2b-815c-47cd-b99c-6693d6cc2f32] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,263: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ace17981-b920-413c-9283-61266716c72e] received
[2026-01-03 06:25:51,278: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,284: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,315: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,295: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,300: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,301: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,303: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,308: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,287: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,316: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,316: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,318: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,318: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8b8c953f-02d2-4051-b07f-69f9aff109f3] received
[2026-01-03 06:25:51,318: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,318: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,319: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,319: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,328: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[552455e1-ce81-4a64-b5f9-7fd87e98927d] received
[2026-01-03 06:25:51,357: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ee7b1f98-d403-42b8-a6f9-13ee2a11caf2] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,365: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:51,365: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6c18acad-c819-42b0-b7b0-7d8a53921d34] received
[2026-01-03 06:25:51,373: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[08c97d70-d701-4d2a-9123-dc0e59970386] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,375: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,391: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ca83456e-023e-4809-8045-a4dbd88cf32b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,392: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,403: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,403: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[2a8fe019-50bf-45cc-9dbf-dbad827e941a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,426: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,427: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[976304c5-4d72-4927-b227-6b6ee76ce8a6] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,443: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[855dbb73-1415-42e9-8e65-8bf49a8a2e51] received
[2026-01-03 06:25:51,471: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,508: WARNING/MainProcess] Indexer: Generated 32 chunks (AST=False)
[2026-01-03 06:25:51,508: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,512: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,513: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,525: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,526: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,528: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,546: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,549: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,550: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,553: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,554: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,555: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,555: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[755a0e20-65ed-4658-ad1e-517f58b974b8] received
[2026-01-03 06:25:51,561: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[42929c12-9360-420b-9fbf-9f407c9a07d5] received
[2026-01-03 06:25:51,588: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,588: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,589: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,595: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a57940a5-cfa4-4747-8fe8-603fde3fa305] received
[2026-01-03 06:25:51,598: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,598: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,598: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[12835c09-0b32-4782-aa22-66e9af148f4e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,600: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,600: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[8f91fe9a-dbd7-4e55-8d78-bfd447a6a06e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,601: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[19169ea3-68d0-402a-89be-cfc371f70572] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,611: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,619: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[01502e64-ffe5-47d4-9dec-c19f8e1a8832] received
[2026-01-03 06:25:51,625: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,636: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:51,644: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,655: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,656: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[12560e45-3ac2-482d-96d9-0055378fce1e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,656: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,667: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,668: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,679: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,679: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,680: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,680: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,681: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,681: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,682: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bf5580cb-9008-4751-8b3d-e179a3a69799] received
[2026-01-03 06:25:51,694: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,694: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,704: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[739a2043-04bb-4c44-85b4-72e260d27dd3] succeeded in 0.03678452700000889s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:51,704: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b4724234-fd51-42b4-82bc-67a32fdcf621] received
[2026-01-03 06:25:51,707: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,712: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,712: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[6a726c6d-301b-440f-893e-2a212d5dcb23] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,722: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,722: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[44aac0c0-15ad-46fd-8e39-f7e5e6b608f8] received
[2026-01-03 06:25:51,732: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,732: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e57dc356-fae8-4baf-97e5-66b8bb548553] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,733: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,748: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[387f909e-21c2-4a01-9316-c9f3794bfeef] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,758: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:51,764: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9768d6d0-16de-45f9-bb90-17b9c5840ac3] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,783: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,784: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,785: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,808: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,808: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d6a11446-78a5-4ca8-8aaa-67b54ef05d4c] received
[2026-01-03 06:25:51,811: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[862c8220-ec94-4b71-80d6-a8a92f80a14f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,817: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,817: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,829: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,829: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,841: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,842: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,842: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,857: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[483cd4df-0f09-4ff7-b7a8-2bc4c808947c] received
[2026-01-03 06:25:51,871: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,875: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,877: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,878: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,881: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,891: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9338bba2-a85b-4cae-ba65-fbfeb6b75394] received
[2026-01-03 06:25:51,913: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,914: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,915: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b2e20fd5-5299-47a1-bf63-02fc64ba6169] received
[2026-01-03 06:25:51,929: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f5eae153-b85e-45eb-93aa-796fbbf69e1a] received
[2026-01-03 06:25:51,930: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,936: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,958: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,968: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,968: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[3973f1fe-6cd3-40d4-a58c-b156e10d8e5a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,969: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,969: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,970: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[61332a66-0024-401c-b3ab-4225be99cb68] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,001: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,002: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[aa484865-f694-462b-9a63-81200a2ddf6d] received
[2026-01-03 06:25:52,003: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:52,010: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:52,011: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,015: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,022: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,023: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,023: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[6392cd40-d034-4755-8bd1-e0e6f4d229e7] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,032: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9768a93d-0490-4cfa-bf2d-0a33715316aa] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,033: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,033: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,033: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,033: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,034: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,036: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4430fc9e-c733-456b-90ce-5f79a90c9abe] received
[2026-01-03 06:25:52,037: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,043: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0db2882e-f62b-4333-9d1f-96186177fa66] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,043: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[85ac02c3-984f-4ef0-bcde-2a5efff5c77c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,044: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,055: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,058: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,065: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8707a4da-ef9d-4721-aa92-bf9f90e6417b] received
[2026-01-03 06:25:52,087: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:52,091: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,093: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[69f1d88d-c48e-4d10-9013-0a740b796b21] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,097: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,098: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,099: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,105: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,106: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,109: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20adc968-58ff-418a-863b-5f0b1b70f1f9] received
[2026-01-03 06:25:52,118: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,170: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,163: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,167: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:52,171: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,168: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,169: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,169: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,143: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:52,168: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,171: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,174: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[865f63a5-3316-4119-881b-1615c4a8fb86] received
[2026-01-03 06:25:52,175: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,192: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,193: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,194: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,196: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,196: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bb38ef00-09d8-42d8-80ce-651c492ef5e3] received
[2026-01-03 06:25:52,200: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e6e3e5be-6351-4baf-8d2c-e3196929e538] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,203: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[05842c31-2fc6-4ff0-a37d-4b4564c81de0] received
[2026-01-03 06:25:52,204: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[39c6b0f9-c543-4f54-9f0c-d9c583aa15db] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,204: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,205: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b88cf86f-90a2-48d8-96a3-66ca03e3d55b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,206: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,218: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[5ce9ef12-c941-461e-a537-61374a574337] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,218: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,218: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,238: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:52,238: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4988b448-3e09-4cb3-8df2-0a1ca32e843e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,242: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,243: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fe73e725-227e-4b1e-9745-00811555d7b8] received
[2026-01-03 06:25:52,255: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,255: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,267: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,268: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,280: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,280: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,280: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,280: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,293: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,331: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:52,332: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,333: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1f27eb50-cbfe-45de-908d-81115c78928c] received
[2026-01-03 06:25:52,334: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1747bb6e-0e95-4c06-90bd-560253515a5a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,337: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[73ff809d-ece6-4619-a652-a8d7899c16cd] received
[2026-01-03 06:25:52,337: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[73a90999-2c9a-45a9-8a2a-f1119b8e0327] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,338: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,340: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[831db29c-fd15-452d-9a0c-d30b8bf9c97b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,341: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,343: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,355: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,393: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:52,394: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[897e0e5f-d990-42c8-b33c-d51fa3b36061] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,431: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,440: WARNING/MainProcess] Indexer: Generated 23 chunks (AST=False)
[2026-01-03 06:25:52,441: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a4b28b29-b3bc-48e8-adfc-bc27b69e202e] received
[2026-01-03 06:25:52,445: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,446: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,458: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,459: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,459: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,459: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,459: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,471: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,474: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,483: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b6dca289-8529-4b34-a55d-2fd71920f15c] received
[2026-01-03 06:25:52,519: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,520: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,528: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,528: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[afe3e77b-aebf-4b52-87a6-f7846d38369f] received
[2026-01-03 06:25:52,534: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:52,535: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,539: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,553: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,573: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,579: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[38167076-71e0-4850-9f95-77eff0ad4918] received
[2026-01-03 06:25:52,586: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ea5df6ae-c8b2-46a3-b3c1-cca1bff13448] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,603: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[20737299-5221-48bc-a9e0-42f736143a05] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,603: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,616: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:52,642: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,647: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,654: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[eae047a6-bc88-48b6-b42b-b9bba80faf51] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,659: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f7e1edf8-31c7-45e7-b902-2ebe2d7eda1a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,682: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,687: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[21df61d4-49fe-4951-9f28-71d7ec314080] received
[2026-01-03 06:25:52,735: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,804: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,815: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,816: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,831: WARNING/MainProcess] Indexer: Generated 9 chunks (AST=False)
[2026-01-03 06:25:52,835: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a995acb4-4f72-48ea-a184-e0a4e8d29673] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,838: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,840: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[91d814b3-d97c-4342-b19d-777da7a3b274] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,849: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,850: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,852: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,855: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7325f8c7-d988-4fb4-a273-4eb20878dd49] received
[2026-01-03 06:25:52,913: WARNING/MainProcess] Indexer: Generated 8 chunks (AST=False)
[2026-01-03 06:25:52,924: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:52,925: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,925: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[12bb4d9b-5341-4631-a400-0833e2ee3b57] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,925: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,961: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,967: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,975: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:52,976: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,978: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,979: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a31fe294-37f1-494f-b801-ebba4fcc0ab5] received
[2026-01-03 06:25:52,989: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,989: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,993: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,000: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,000: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,004: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,006: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,006: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,006: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3a81dc95-85ad-47e9-9253-eab65d216009] received
[2026-01-03 06:25:53,006: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6c18acad-c819-42b0-b7b0-7d8a53921d34] succeeded in 0.11830507299998771s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,032: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,035: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,040: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e30e871e-a9a7-4e3e-9ab8-2a7109ce1834] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,042: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,043: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,044: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fce6fbbf-9493-4410-8a34-504f63b82f90] received
[2026-01-03 06:25:53,044: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,060: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,078: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:53,079: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,087: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,079: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[84aa799b-01fc-4b8d-a6aa-1da3d64ec71f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,082: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,084: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,085: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,085: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,079: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f770a4d2-5fd0-46fe-922a-dd81339176d0] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,087: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,092: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[edd3420b-b918-4384-8149-c8c043dc8d43] received
[2026-01-03 06:25:53,128: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:53,156: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,128: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[fe582376-ea84-463b-b3c1-e82d9c0d817b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,138: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,138: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,145: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[8b8c953f-02d2-4051-b07f-69f9aff109f3] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,147: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ace17981-b920-413c-9283-61266716c72e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,150: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,135: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,158: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,158: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d4fa4786-632d-47f0-b296-3f8cc5e98b48] received
[2026-01-03 06:25:53,167: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[552455e1-ce81-4a64-b5f9-7fd87e98927d] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,169: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,171: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,171: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,216: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,299: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,308: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,308: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,410: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,428: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[71d50d6c-edc3-4b6f-b206-cf82bea7e119] received
[2026-01-03 06:25:53,434: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,464: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,500: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,511: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,520: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[855dbb73-1415-42e9-8e65-8bf49a8a2e51] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,527: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4ee22a03-2392-4752-b2fb-a6b6bd0387a4] received
[2026-01-03 06:25:53,537: WARNING/MainProcess] Indexer: Generated 19 chunks (AST=False)
[2026-01-03 06:25:53,537: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[755a0e20-65ed-4658-ad1e-517f58b974b8] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,538: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,544: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[42929c12-9360-420b-9fbf-9f407c9a07d5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,573: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[44aac0c0-15ad-46fd-8e39-f7e5e6b608f8] succeeded in 0.36762347600000567s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,587: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,601: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:53,618: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:53,643: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,644: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,645: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[14d90205-709d-4e92-9a56-2ebd27684369] received
[2026-01-03 06:25:53,645: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,661: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,671: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a57940a5-cfa4-4747-8fe8-603fde3fa305] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,672: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,672: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,673: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,673: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,673: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,673: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,677: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[092d29f0-456f-4c6c-a2de-beab872a5e95] received
[2026-01-03 06:25:53,689: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:53,726: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:53,728: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,728: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,737: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[aa484865-f694-462b-9a63-81200a2ddf6d] succeeded in 0.06633749700000635s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,738: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,738: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,740: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bb1bdea3-c08b-4365-8909-9c5a12167114] received
[2026-01-03 06:25:53,740: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,741: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f5eae153-b85e-45eb-93aa-796fbbf69e1a] succeeded in 0.07157996699999103s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,742: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,745: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,749: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,749: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,749: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[bf5580cb-9008-4751-8b3d-e179a3a69799] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,749: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,751: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,751: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[db7eed8c-b7f6-4c5a-b2e5-e19da39ec5ca] received
[2026-01-03 06:25:53,752: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,764: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,769: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,792: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,770: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8707a4da-ef9d-4721-aa92-bf9f90e6417b] succeeded in 0.029595747000001893s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,774: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[01502e64-ffe5-47d4-9dec-c19f8e1a8832] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,774: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b4724234-fd51-42b4-82bc-67a32fdcf621] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,778: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,778: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,779: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,789: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f180341f-87d2-4586-9875-3086f1b0efb5] received
[2026-01-03 06:25:53,792: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,770: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,795: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,800: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d6a11446-78a5-4ca8-8aaa-67b54ef05d4c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,807: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,808: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,821: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,823: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,824: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,826: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[29d01c1e-9333-4e7b-aa54-88e9c109291d] received
[2026-01-03 06:25:53,836: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,837: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bb38ef00-09d8-42d8-80ce-651c492ef5e3] succeeded in 0.04419506400000728s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,837: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9338bba2-a85b-4cae-ba65-fbfeb6b75394] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,837: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[483cd4df-0f09-4ff7-b7a8-2bc4c808947c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,840: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,841: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,844: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,845: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[05842c31-2fc6-4ff0-a37d-4b4564c81de0] succeeded in 0.03823978600001965s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,847: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,847: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d3229b43-da8a-43c9-9ca6-bd7cee0c8b50] received
[2026-01-03 06:25:53,855: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,860: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b2e20fd5-5299-47a1-bf63-02fc64ba6169] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,861: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,863: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,874: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,876: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,877: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,901: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,904: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4430fc9e-c733-456b-90ce-5f79a90c9abe] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,905: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2873ca6d-9bba-4482-a4ed-88631a474f6b] received
[2026-01-03 06:25:53,915: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,915: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,916: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,916: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,917: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,955: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:53,985: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,991: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,003: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,025: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,054: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,057: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,054: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,055: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,055: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,054: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[00cdb93b-4637-4d55-a608-d0ba78e44fd6] received
[2026-01-03 06:25:54,058: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,118: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,118: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,119: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[865f63a5-3316-4119-881b-1615c4a8fb86] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,119: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[20adc968-58ff-418a-863b-5f0b1b70f1f9] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,131: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7fef6d1a-1cc9-4386-8930-325bb4144de1] received
[2026-01-03 06:25:54,131: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,131: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,132: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,132: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,138: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,172: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[fe73e725-227e-4b1e-9745-00811555d7b8] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,178: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,194: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,194: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,204: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,204: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,205: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,206: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,206: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,207: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,207: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7c56e71e-eb60-4767-82a3-696c556ab740] received
[2026-01-03 06:25:54,218: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,218: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,220: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,239: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,239: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,240: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[598a68ea-2555-499a-a44d-39a441d38a5e] received
[2026-01-03 06:25:54,249: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1f27eb50-cbfe-45de-908d-81115c78928c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,259: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,263: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3904fe90-7a1d-40cb-8fc8-a5e37986803e] received
[2026-01-03 06:25:54,264: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b6dca289-8529-4b34-a55d-2fd71920f15c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,264: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a4b28b29-b3bc-48e8-adfc-bc27b69e202e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,265: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[afe3e77b-aebf-4b52-87a6-f7846d38369f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,265: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[73ff809d-ece6-4619-a652-a8d7899c16cd] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,265: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[38167076-71e0-4850-9f95-77eff0ad4918] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,269: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,279: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,305: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,306: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:54,306: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,307: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d9ed74f6-d674-472b-912e-e2fb57a9de09] received
[2026-01-03 06:25:54,318: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,329: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,342: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,353: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,366: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,366: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,366: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,366: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,389: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,389: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,413: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,414: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[21df61d4-49fe-4951-9f28-71d7ec314080] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,426: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[089628d4-96df-4b50-8f2b-e89cfd5694a4] received
[2026-01-03 06:25:54,432: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a31fe294-37f1-494f-b801-ebba4fcc0ab5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,433: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,435: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:54,444: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,445: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,466: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,487: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:54,487: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:54,499: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,500: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,501: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[34aa3eea-9c8d-40f0-b4cc-e2d1afa71977] received
[2026-01-03 06:25:54,511: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,511: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,512: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,512: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,513: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,513: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,513: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,513: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,517: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[56548b19-0c42-49f2-bc4b-01ce6a3e46d8] received
[2026-01-03 06:25:54,544: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:54,546: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[7325f8c7-d988-4fb4-a273-4eb20878dd49] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,548: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,549: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f8948548-0c6d-4e2b-9faf-14e0433d7e12] received
[2026-01-03 06:25:54,549: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[3a81dc95-85ad-47e9-9253-eab65d216009] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,549: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[fce6fbbf-9493-4410-8a34-504f63b82f90] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,563: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,563: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,563: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,570: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,609: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,609: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,639: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,646: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:54,646: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cd46ddb8-0f88-4796-a4ed-7a50230cb224] received
[2026-01-03 06:25:54,649: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,659: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,659: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,659: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,660: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,660: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,660: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,661: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,661: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,668: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[17bee9fa-c906-486b-8e21-79f9d10eeca2] received
[2026-01-03 06:25:54,683: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,683: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,696: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[71d50d6c-edc3-4b6f-b206-cf82bea7e119] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,704: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[edd3420b-b918-4384-8149-c8c043dc8d43] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,710: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4627335a-c0b4-4c12-ba77-d39494e6407f] received
[2026-01-03 06:25:54,716: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:54,716: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4ee22a03-2392-4752-b2fb-a6b6bd0387a4] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,716: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,717: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d4fa4786-632d-47f0-b296-3f8cc5e98b48] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,717: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[14d90205-709d-4e92-9a56-2ebd27684369] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,734: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:54,788: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,734: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,737: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,747: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,748: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,749: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7bfe8ce4-68ad-44a0-ae74-bdaeb97449f1] received
[2026-01-03 06:25:54,758: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,758: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,782: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,734: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[092d29f0-456f-4c6c-a2de-beab872a5e95] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,788: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,789: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,793: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,797: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8b4b5fd8-ad16-4ad7-b20e-f39df22b4bab] received
[2026-01-03 06:25:54,816: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,824: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,830: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,831: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[bb1bdea3-c08b-4365-8909-9c5a12167114] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,841: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:54,852: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,854: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,854: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,855: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,855: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,856: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1172102d-dfa5-429b-9a5f-47ad78055ce9] received
[2026-01-03 06:25:54,860: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,863: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[db7eed8c-b7f6-4c5a-b2e5-e19da39ec5ca] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,867: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,868: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,869: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,869: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,872: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,874: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d3245c6b-3ec1-4087-af1b-5a477852c1d4] received
[2026-01-03 06:25:54,887: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,894: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,891: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,892: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,892: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f180341f-87d2-4586-9875-3086f1b0efb5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,893: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,891: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[29d01c1e-9333-4e7b-aa54-88e9c109291d] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,897: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2f2f1862-77dd-4a0a-9d8c-44d6162c9a72] received
[2026-01-03 06:25:54,949: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,955: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,955: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:54,967: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,978: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[7fef6d1a-1cc9-4386-8930-325bb4144de1] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,978: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,978: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,978: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,003: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:55,009: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,010: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,011: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,012: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,012: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a576ca1-d500-4b61-bf25-287dca404486] received
[2026-01-03 06:25:55,018: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,020: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,020: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,020: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,021: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[2873ca6d-9bba-4482-a4ed-88631a474f6b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,031: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c70dce59-7611-4283-b01a-1552eda176bb] received
[2026-01-03 06:25:55,045: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,049: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,052: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d3229b43-da8a-43c9-9ca6-bd7cee0c8b50] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,053: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[598a68ea-2555-499a-a44d-39a441d38a5e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,062: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,062: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[00cdb93b-4637-4d55-a608-d0ba78e44fd6] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,063: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[7c56e71e-eb60-4767-82a3-696c556ab740] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,063: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,063: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,070: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,070: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,071: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,072: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d32d2853-2845-46e7-9fe4-e72f0f7bde05] received
[2026-01-03 06:25:55,083: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,094: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,094: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,109: WARNING/MainProcess] Indexer: Generated 11 chunks (AST=False)
[2026-01-03 06:25:55,117: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,117: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,128: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,133: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:55,138: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,139: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bcd734f6-dc53-4464-8086-69ca0f6cf3a1] received
[2026-01-03 06:25:55,142: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ffb9c74c-ccae-47bb-8c1e-06655c9b0b7a] received
[2026-01-03 06:25:55,154: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,161: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,161: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,167: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,171: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:55,171: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[39d41b54-742d-4d08-a977-08b6e9b6d1d8] received
[2026-01-03 06:25:55,172: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,172: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d9ed74f6-d674-472b-912e-e2fb57a9de09] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,174: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[3904fe90-7a1d-40cb-8fc8-a5e37986803e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,174: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,176: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,176: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,179: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,190: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,194: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:55,197: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[930b51c1-e8b5-4347-9dfc-83cb8fc04b96] received
[2026-01-03 06:25:55,198: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[089628d4-96df-4b50-8f2b-e89cfd5694a4] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,202: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[34aa3eea-9c8d-40f0-b4cc-e2d1afa71977] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,219: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:55,227: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,228: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,228: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,228: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,230: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[24e3bb21-6241-44ba-a799-5e90e1b99ae8] received
[2026-01-03 06:25:55,260: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:55,263: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[56548b19-0c42-49f2-bc4b-01ce6a3e46d8] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,267: WARNING/MainProcess] Indexer: Generated 7 chunks (AST=False)
[2026-01-03 06:25:55,268: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,274: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,278: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,280: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c5a26f6-ec52-4ed3-8211-950cd8c70362] received
[2026-01-03 06:25:55,280: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,285: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4627335a-c0b4-4c12-ba77-d39494e6407f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,285: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[7bfe8ce4-68ad-44a0-ae74-bdaeb97449f1] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,288: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,291: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,292: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,294: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,294: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,295: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0c7f6000-6348-4e5c-92b2-ec2f6fc0800b] received
[2026-01-03 06:25:55,309: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,318: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,319: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,330: WARNING/MainProcess] Indexer: Generated 242 chunks (AST=False)
[2026-01-03 06:25:55,337: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,339: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,340: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,342: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,342: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,342: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,345: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,349: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,346: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[63898038-f7ba-4b6d-ae28-89f1308e28ca] received
[2026-01-03 06:25:55,351: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f8948548-0c6d-4e2b-9faf-14e0433d7e12] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,352: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2478dd77-d066-4f7a-a7d3-0873c861172c] received
[2026-01-03 06:25:55,353: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[17bee9fa-c906-486b-8e21-79f9d10eeca2] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,354: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,355: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,357: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[cd46ddb8-0f88-4796-a4ed-7a50230cb224] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,360: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1172102d-dfa5-429b-9a5f-47ad78055ce9] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,362: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6d7a7ffa-ff0b-443c-947b-9256e279c835] received
[2026-01-03 06:25:55,363: WARNING/MainProcess] Failed to load parser for javascript: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,363: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[8b4b5fd8-ad16-4ad7-b20e-f39df22b4bab] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,364: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,369: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,370: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,373: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,374: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,375: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ffb9c74c-ccae-47bb-8c1e-06655c9b0b7a] succeeded in 0.0028168569999991178s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:55,391: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[39d41b54-742d-4d08-a977-08b6e9b6d1d8] succeeded in 0.006575656999984858s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:55,400: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[99859945-aee0-48e9-acb2-2a6f0dba7988] received
[2026-01-03 06:25:55,405: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,409: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[930b51c1-e8b5-4347-9dfc-83cb8fc04b96] succeeded in 0.012416244999997161s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:55,415: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,415: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,418: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,420: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,421: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,424: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,425: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,429: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0e6b8392-a117-4807-bf71-c8162bb1b95e] received
[2026-01-03 06:25:55,432: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[2f2f1862-77dd-4a0a-9d8c-44d6162c9a72] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,434: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ec00386d-a75e-415a-852b-b0c3ecf52880] received
[2026-01-03 06:25:55,435: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[24e3bb21-6241-44ba-a799-5e90e1b99ae8] succeeded in 0.021942056999989745s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:55,436: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a576ca1-d500-4b61-bf25-287dca404486] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,436: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d3245c6b-3ec1-4087-af1b-5a477852c1d4] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,439: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d32d2853-2845-46e7-9fe4-e72f0f7bde05] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,439: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[c70dce59-7611-4283-b01a-1552eda176bb] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,452: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,545: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:55,545: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,552: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,589: WARNING/MainProcess] Indexer: Generated 7 chunks (AST=False)
[2026-01-03 06:25:55,599: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba058ca5-69e5-438a-bfbf-6cc163be66f5] received
[2026-01-03 06:25:55,613: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:55,614: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,626: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,637: WARNING/MainProcess] Failed to load parser for typescript: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,647: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,647: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,648: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,649: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,652: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,677: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3c4655b1-505b-4407-b7a7-b1926c2543bd] received
[2026-01-03 06:25:55,729: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,740: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,740: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[74081b0b-5efb-48fb-b1d5-5c5da6bb2049] received
[2026-01-03 06:25:55,754: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,754: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[bcd734f6-dc53-4464-8086-69ca0f6cf3a1] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,787: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,845: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,889: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,913: WARNING/MainProcess] Indexer: Generated 10 chunks (AST=False)
[2026-01-03 06:25:55,914: WARNING/MainProcess] Indexer: Generated 14 chunks (AST=False)
[2026-01-03 06:25:55,920: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0c7f6000-6348-4e5c-92b2-ec2f6fc0800b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,930: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[defee8e0-990d-414d-99c9-84bda39852ad] received
[2026-01-03 06:25:56,045: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,107: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,111: WARNING/MainProcess] Indexer: Generated 8 chunks (AST=False)
[2026-01-03 06:25:56,144: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,155: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,175: WARNING/MainProcess] Indexer: Generated 11 chunks (AST=False)
[2026-01-03 06:25:56,181: WARNING/MainProcess] Indexer: Generated 18 chunks (AST=False)
[2026-01-03 06:25:56,194: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,212: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,221: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,219: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,219: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[eeef10b5-4a13-453e-a36a-9eb1f4ed4fad] received
[2026-01-03 06:25:56,220: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,220: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,220: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,217: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,222: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[368344aa-d103-4190-a003-1d38f66fc02c] received
[2026-01-03 06:25:56,225: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a39fb5c9-3538-4a96-8a89-786b3a650a0e] received
[2026-01-03 06:25:56,243: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:56,244: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,245: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[07bea1c1-37b5-409a-b80b-a59301988298] received
[2026-01-03 06:25:56,249: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[714524c8-8cf2-43f1-8661-be7e1579cccc] received
[2026-01-03 06:25:56,249: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c5a26f6-ec52-4ed3-8211-950cd8c70362] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,250: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[63898038-f7ba-4b6d-ae28-89f1308e28ca] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,250: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[85a7ac7b-4b98-4977-aa49-3a5d1bbcc34b] received
[2026-01-03 06:25:56,253: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,253: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ec00386d-a75e-415a-852b-b0c3ecf52880] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,262: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,264: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,264: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,265: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,266: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,267: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,268: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,277: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,277: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,278: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a005855-b792-4791-910f-b8c588dc5e70] received
[2026-01-03 06:25:56,289: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,290: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,290: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,291: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,291: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,292: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,292: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,358: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[68abc22f-fb0c-43d8-b696-5283a250ce77] received
[2026-01-03 06:25:56,377: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[99859945-aee0-48e9-acb2-2a6f0dba7988] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,379: WARNING/MainProcess] Indexer: Generated 7 chunks (AST=False)
[2026-01-03 06:25:56,380: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0e6b8392-a117-4807-bf71-c8162bb1b95e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,382: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:56,382: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[6d7a7ffa-ff0b-443c-947b-9256e279c835] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,383: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[2478dd77-d066-4f7a-a7d3-0873c861172c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,384: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[31d061d0-cc91-47c8-8729-ec4af99b2409] received
[2026-01-03 06:25:56,385: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[3c4655b1-505b-4407-b7a7-b1926c2543bd] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,385: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba058ca5-69e5-438a-bfbf-6cc163be66f5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,401: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[74081b0b-5efb-48fb-b1d5-5c5da6bb2049] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,406: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,424: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:56,424: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,431: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,431: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,443: WARNING/MainProcess] Failed to load parser for typescript: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,456: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c99aa36-f818-4cee-9268-c51cfce654fc] received
[2026-01-03 06:25:56,456: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:56,469: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,496: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:56,501: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,504: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,505: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,505: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,510: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cf2663d0-3096-487d-808d-948925bda839] received
[2026-01-03 06:25:56,520: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,526: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,548: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,549: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,550: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4aa1fc33-d2e6-480e-b99f-6d81d30173c5] received
[2026-01-03 06:25:56,555: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:56,564: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,572: WARNING/MainProcess] Indexer: Generated 13 chunks (AST=False)
[2026-01-03 06:25:56,583: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,589: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,590: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,596: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,607: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,618: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,619: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[eeef10b5-4a13-453e-a36a-9eb1f4ed4fad] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,619: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,619: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c4d0b4a9-edd7-40ae-852f-15373d732019] received
[2026-01-03 06:25:56,630: WARNING/MainProcess] Indexer: Generated 8 chunks (AST=False)
[2026-01-03 06:25:56,631: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[defee8e0-990d-414d-99c9-84bda39852ad] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,631: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,632: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,632: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,632: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,645: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,645: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,646: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,646: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[764e2953-d951-40eb-9a78-9559148dcf24] received
[2026-01-03 06:25:56,650: WARNING/MainProcess] Indexer: Generated 17 chunks (AST=False)
[2026-01-03 06:25:56,657: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,662: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,663: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,664: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,667: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,668: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ebb37ea8-1ecc-4f79-bb1b-651bbccc43ea] received
[2026-01-03 06:25:56,674: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[85a7ac7b-4b98-4977-aa49-3a5d1bbcc34b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,678: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a005855-b792-4791-910f-b8c588dc5e70] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,680: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[68abc22f-fb0c-43d8-b696-5283a250ce77] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,692: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[368344aa-d103-4190-a003-1d38f66fc02c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,693: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,693: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,693: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[81f150c7-af69-4d0d-963a-e2ccf0a53156] received
[2026-01-03 06:25:56,694: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[07bea1c1-37b5-409a-b80b-a59301988298] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,695: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[714524c8-8cf2-43f1-8661-be7e1579cccc] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,696: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[31d061d0-cc91-47c8-8729-ec4af99b2409] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,699: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,700: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,708: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,720: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,731: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,732: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,733: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,769: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,783: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,783: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,786: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,812: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:56,813: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,819: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,836: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,855: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,857: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,858: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,858: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,858: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a39fb5c9-3538-4a96-8a89-786b3a650a0e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,865: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:56,867: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c99aa36-f818-4cee-9268-c51cfce654fc] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,870: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,871: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[81f150c7-af69-4d0d-963a-e2ccf0a53156] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,873: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,874: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,875: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[cf2663d0-3096-487d-808d-948925bda839] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,880: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,886: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,898: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,909: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,912: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,912: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,917: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4aa1fc33-d2e6-480e-b99f-6d81d30173c5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,918: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[764e2953-d951-40eb-9a78-9559148dcf24] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,920: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[c4d0b4a9-edd7-40ae-852f-15373d732019] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,920: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ebb37ea8-1ecc-4f79-bb1b-651bbccc43ea] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
