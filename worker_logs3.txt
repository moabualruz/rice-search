/usr/local/lib/python3.11/site-packages/celery/platforms.py:841: SecurityWarning: You're running the worker with superuser privileges: this is
Starting Celery worker with pool=threads, concurrency=10
absolutely not recommended!

Please specify a different user using the --uid option.

User information: uid=0 euid=0 gid=0 egid=0

  warnings.warn(SecurityWarning(ROOT_DISCOURAGED.format(
 
 -------------- celery@f63ac3f32946 v5.6.1 (recovery)
--- ***** ----- 
-- ******* ---- Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.41 2026-01-03 06:17:35
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         rice_worker:0x7e0ba1101810
- ** ---------- .> transport:   redis://redis:6379/0
- ** ---------- .> results:     redis://redis:6379/0
- *** --- * --- .> concurrency: 10 (thread)
-- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .> celery           exchange=celery(direct) key=celery
                

[tasks]
[2026-01-03 06:17:35,141: INFO/MainProcess] Connected to redis://redis:6379/0
  . src.tasks.ingestion.ingest_file_task
  . src.tasks.ingestion.rebuild_index_task
  . src.worker.celery_app.echo_task


worker: Warm shutdown (MainProcess)
[2026-01-03 06:17:35,143: INFO/MainProcess] mingle: searching for neighbors
[2026-01-03 06:17:36,149: INFO/MainProcess] mingle: all alone
[2026-01-03 06:17:36,159: INFO/MainProcess] celery@f63ac3f32946 ready.
/usr/local/lib/python3.11/site-packages/celery/platforms.py:841: SecurityWarning: You're running the worker with superuser privileges: this is
absolutely not recommended!

Please specify a different user using the --uid option.

User information: uid=0 euid=0 gid=0 egid=0

  warnings.warn(SecurityWarning(ROOT_DISCOURAGED.format(
Starting Celery worker with pool=threads, concurrency=10
 
 -------------- celery@f63ac3f32946 v5.6.1 (recovery)
--- ***** ----- 
-- ******* ---- Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.41 2026-01-03 06:23:15
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         rice_worker:0x710a723b14d0
- ** ---------- .> transport:   redis://redis:6379/0
- ** ---------- .> results:     redis://redis:6379/0
- *** --- * --- .> concurrency: 10 (thread)
-- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .> celery           exchange=celery(direct) key=celery
                

[tasks]
  . src.tasks.ingestion.ingest_file_task
  . src.tasks.ingestion.rebuild_index_task
  . src.worker.celery_app.echo_task
[2026-01-03 06:23:15,956: INFO/MainProcess] Connected to redis://redis:6379/0

[2026-01-03 06:23:15,958: INFO/MainProcess] mingle: searching for neighbors
[2026-01-03 06:23:16,965: INFO/MainProcess] mingle: all alone
[2026-01-03 06:23:16,976: INFO/MainProcess] celery@f63ac3f32946 ready.
[2026-01-03 06:25:40,895: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1a7038a9-75b5-4338-a5f3-aae3879e239c] received
[2026-01-03 06:25:40,900: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[72145853-db71-4ae7-9efa-a97035158e8a] received
[2026-01-03 06:25:40,905: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9b8ce85c-aaaf-41b1-9bcb-c091cb2abc2b] received
[2026-01-03 06:25:40,911: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b5b13633-e47e-4e10-828c-d27d4a3ff297] received
[2026-01-03 06:25:40,917: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ceea0ed6-7375-4394-a54f-b33c90538d88] received
[2026-01-03 06:25:40,926: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[480b2d9d-6ef3-4c19-ae8f-31bedade1776] received
[2026-01-03 06:25:40,932: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f8e68c48-5fb4-4aa9-b4d7-cb4e8e8e7391] received
[2026-01-03 06:25:40,941: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20aa2802-6e16-4696-8e4b-6dc280ae4f0d] received
[2026-01-03 06:25:40,951: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8c61c093-ea36-4999-9425-ca222425fc62] received
[2026-01-03 06:25:40,964: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[68ff70e2-f72c-4b4e-bfcc-b264d1fcfe16] received
[2026-01-03 06:25:40,975: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[820102a8-1046-4462-bd24-eaed4d1682e6] received
[2026-01-03 06:25:40,981: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e070e502-f906-44d5-b675-d6cd7f652e05] received
[2026-01-03 06:25:40,987: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[838a01be-0d52-457c-9939-ff040aa932ed] received
[2026-01-03 06:25:40,994: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c8f6c4a-181d-4d88-830b-99eb4bebd839] received
[2026-01-03 06:25:41,002: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ecb41869-88e5-4d94-9d21-96d1ba47f38f] received
[2026-01-03 06:25:41,009: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2a8fe019-50bf-45cc-9dbf-dbad827e941a] received
[2026-01-03 06:25:41,017: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b1e94e8d-18c5-4bac-8d56-64856504ad5a] received
[2026-01-03 06:25:41,028: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ceac67dc-cccd-47f2-a566-7fd2519f97ef] received
[2026-01-03 06:25:41,047: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dc68228f-c6c2-401c-83c6-4586310891d7] received
[2026-01-03 06:25:41,102: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dff2aea7-be36-432f-b6b8-f606daefdd8e] received
[2026-01-03 06:25:41,158: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[98147760-5e63-4826-9253-3f8eb8c03f0a] received
[2026-01-03 06:25:41,213: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d7b6220b-f747-4676-84b6-54224662fcaa] received
[2026-01-03 06:25:41,321: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,321: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,321: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,322: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,323: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,340: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[70a77dfc-785a-47aa-ad69-a62b28cd679f] received
[2026-01-03 06:25:41,411: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:25:41,429: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[73e23216-054f-4511-9e4a-d654844e76eb] received
[2026-01-03 06:25:41,430: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b46b27b1-b8bf-4b77-b4ff-8d5dbeca4d3f] received
[2026-01-03 06:25:41,430: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a9db3666-16b9-4a79-8a68-3605c91bd340] received
[2026-01-03 06:25:41,431: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f1e9733a-31c8-4366-8fd2-3fcfae860a4d] received
[2026-01-03 06:25:41,478: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e7bf9ff5-9ada-4863-aa0c-cfad407a9284] received
[2026-01-03 06:25:41,543: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1c7edc92-0f14-4460-81f2-7c9f84b5d602] received
[2026-01-03 06:25:41,566: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e5608e2c-f066-4184-807c-f5a6f1210bf8] received
[2026-01-03 06:25:41,589: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[387f909e-21c2-4a01-9316-c9f3794bfeef] received
[2026-01-03 06:25:41,603: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c90e63de-750f-46da-9578-4fbd7c5c3abc] received
[2026-01-03 06:25:41,605: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6020cf44-998a-4b58-9294-395eff89ae75] received
[2026-01-03 06:25:41,605: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[90e07b41-5ecc-4ac9-a22e-cbe1293c8824] received
[2026-01-03 06:25:41,606: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[78eddf5f-1e30-43a9-916e-6a1e2956a885] received
[2026-01-03 06:25:41,607: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5f762db2-72d2-48fd-bd18-915e8adcae54] received
[2026-01-03 06:25:41,608: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba300b96-5b7a-4c2c-88aa-4243baf34563] received
[2026-01-03 06:25:41,609: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e2107242-0339-44a0-a64f-969315386dd4] received
[2026-01-03 06:25:41,610: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20e848b1-6886-41fc-846d-ba20103f31e0] received
[2026-01-03 06:25:41,611: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dbb97689-e548-4d98-a053-2dd3935946b0] received
[2026-01-03 06:25:41,613: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e739648e-b432-4ef2-ae35-71e7a8523888] received
[2026-01-03 06:25:41,614: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a61cf6c7-2fd7-46ae-9cdc-422708184a9f] received
[2026-01-03 06:25:41,615: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[983b0f2b-815c-47cd-b99c-6693d6cc2f32] received
[2026-01-03 06:25:41,616: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ee7b1f98-d403-42b8-a6f9-13ee2a11caf2] received
[2026-01-03 06:25:41,616: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[08c97d70-d701-4d2a-9123-dc0e59970386] received
[2026-01-03 06:25:41,617: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ca83456e-023e-4809-8045-a4dbd88cf32b] received
[2026-01-03 06:25:41,619: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[976304c5-4d72-4927-b227-6b6ee76ce8a6] received
[2026-01-03 06:25:41,619: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[12835c09-0b32-4782-aa22-66e9af148f4e] received
[2026-01-03 06:25:41,620: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8f91fe9a-dbd7-4e55-8d78-bfd447a6a06e] received
[2026-01-03 06:25:41,621: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[19169ea3-68d0-402a-89be-cfc371f70572] received
[2026-01-03 06:25:48,431: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b5b13633-e47e-4e10-828c-d27d4a3ff297] succeeded in 7.518409638999998s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,431: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20aa2802-6e16-4696-8e4b-6dc280ae4f0d] succeeded in 7.489114551s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,453: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:48,453: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:48,457: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[480b2d9d-6ef3-4c19-ae8f-31bedade1776] succeeded in 7.530048004999998s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,458: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:48,459: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:48,471: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e070e502-f906-44d5-b675-d6cd7f652e05] succeeded in 0.03988551500000881s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,473: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:48,473: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:48,476: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[68ff70e2-f72c-4b4e-bfcc-b264d1fcfe16] succeeded in 7.5107752940000125s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,479: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c8f6c4a-181d-4d88-830b-99eb4bebd839] succeeded in 0.007663390999994135s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:25:48,756: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:48,756: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,788: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:48,789: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:48,789: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,790: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,802: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9b8ce85c-aaaf-41b1-9bcb-c091cb2abc2b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,802: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[72145853-db71-4ae7-9efa-a97035158e8a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,802: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1a7038a9-75b5-4338-a5f3-aae3879e239c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,816: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:48,832: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ceac67dc-cccd-47f2-a566-7fd2519f97ef] succeeded in 0.009536814999989929s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,834: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:48,843: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dc68228f-c6c2-401c-83c6-4586310891d7] succeeded in 0.009335125000006883s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,847: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dff2aea7-be36-432f-b6b8-f606daefdd8e] succeeded in 0.012520012999999608s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,848: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:48,849: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,850: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[98147760-5e63-4826-9253-3f8eb8c03f0a] succeeded in 0.006506392999995114s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,853: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d7b6220b-f747-4676-84b6-54224662fcaa] succeeded in 0.005997920000027079s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,855: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[70a77dfc-785a-47aa-ad69-a62b28cd679f] succeeded in 0.004237431000007064s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,858: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[73e23216-054f-4511-9e4a-d654844e76eb] succeeded in 0.004180253000015455s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,859: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b46b27b1-b8bf-4b77-b4ff-8d5dbeca4d3f] succeeded in 0.00382884600000466s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,862: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a9db3666-16b9-4a79-8a68-3605c91bd340] succeeded in 0.0036473000000114553s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,864: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b1e94e8d-18c5-4bac-8d56-64856504ad5a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:48,865: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f1e9733a-31c8-4366-8fd2-3fcfae860a4d] succeeded in 0.005536291999987952s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,866: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e7bf9ff5-9ada-4863-aa0c-cfad407a9284] succeeded in 0.0046486429999959s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,889: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1c7edc92-0f14-4460-81f2-7c9f84b5d602] succeeded in 0.014577878000011424s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:48,898: WARNING/MainProcess] Failed to load parser for python: __init__() takes exactly 1 argument (2 given)
[2026-01-03 06:25:49,182: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[12560e45-3ac2-482d-96d9-0055378fce1e] received
[2026-01-03 06:25:49,183: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e57dc356-fae8-4baf-97e5-66b8bb548553] received
[2026-01-03 06:25:49,184: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6a726c6d-301b-440f-893e-2a212d5dcb23] received
[2026-01-03 06:25:49,185: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9768d6d0-16de-45f9-bb90-17b9c5840ac3] received
[2026-01-03 06:25:49,185: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[862c8220-ec94-4b71-80d6-a8a92f80a14f] received
[2026-01-03 06:25:49,186: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3973f1fe-6cd3-40d4-a58c-b156e10d8e5a] received
[2026-01-03 06:25:49,187: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9768a93d-0490-4cfa-bf2d-0a33715316aa] received
[2026-01-03 06:25:49,188: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[739a2043-04bb-4c44-85b4-72e260d27dd3] received
[2026-01-03 06:25:49,188: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[61332a66-0024-401c-b3ab-4225be99cb68] received
[2026-01-03 06:25:49,189: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6392cd40-d034-4755-8bd1-e0e6f4d229e7] received
[2026-01-03 06:25:49,190: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0db2882e-f62b-4333-9d1f-96186177fa66] received
[2026-01-03 06:25:49,192: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[85ac02c3-984f-4ef0-bcde-2a5efff5c77c] received
[2026-01-03 06:25:49,193: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[69f1d88d-c48e-4d10-9013-0a740b796b21] received
[2026-01-03 06:25:49,194: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e6e3e5be-6351-4baf-8d2c-e3196929e538] received
[2026-01-03 06:25:49,194: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[39c6b0f9-c543-4f54-9f0c-d9c583aa15db] received
[2026-01-03 06:25:49,195: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b88cf86f-90a2-48d8-96a3-66ca03e3d55b] received
[2026-01-03 06:25:49,196: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5ce9ef12-c941-461e-a537-61374a574337] received
[2026-01-03 06:25:49,196: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4988b448-3e09-4cb3-8df2-0a1ca32e843e] received
[2026-01-03 06:25:49,197: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1747bb6e-0e95-4c06-90bd-560253515a5a] received
[2026-01-03 06:25:49,198: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[831db29c-fd15-452d-9a0c-d30b8bf9c97b] received
[2026-01-03 06:25:49,199: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[897e0e5f-d990-42c8-b33c-d51fa3b36061] received
[2026-01-03 06:25:49,199: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[73a90999-2c9a-45a9-8a2a-f1119b8e0327] received
[2026-01-03 06:25:49,596: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8c61c093-ea36-4999-9425-ca222425fc62] succeeded in 8.644076665s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,596: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ceea0ed6-7375-4394-a54f-b33c90538d88] succeeded in 8.676859680999996s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,597: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ecb41869-88e5-4d94-9d21-96d1ba47f38f] succeeded in 1.1199925690000043s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,599: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[838a01be-0d52-457c-9939-ff040aa932ed] succeeded in 1.1420267050000064s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,600: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:49,601: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:49,602: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[820102a8-1046-4462-bd24-eaed4d1682e6] succeeded in 1.1711840610000195s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,603: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f8e68c48-5fb4-4aa9-b4d7-cb4e8e8e7391] succeeded in 8.667372408000006s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:49,608: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:49,672: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:49,721: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,140: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,359: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,412: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,412: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,415: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,417: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,432: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,433: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,506: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,507: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,529: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,533: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,537: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,548: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,550: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,551: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,551: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e2107242-0339-44a0-a64f-969315386dd4] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,552: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ea5df6ae-c8b2-46a3-b3c1-cca1bff13448] received
[2026-01-03 06:25:50,559: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,563: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,563: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,564: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,564: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,564: WARNING/MainProcess] Need to load profiles.
[2026-01-03 06:25:50,568: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:50,600: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,616: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,626: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:50,626: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,633: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:50,633: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20737299-5221-48bc-a9e0-42f736143a05] received
[2026-01-03 06:25:50,634: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,635: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,636: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,637: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:50,637: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,640: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,645: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,646: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[eae047a6-bc88-48b6-b42b-b9bba80faf51] received
[2026-01-03 06:25:50,654: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,658: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,659: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,666: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,668: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,669: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[91d814b3-d97c-4342-b19d-777da7a3b274] received
[2026-01-03 06:25:50,674: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,676: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,679: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,684: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,686: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f7e1edf8-31c7-45e7-b902-2ebe2d7eda1a] received
[2026-01-03 06:25:50,687: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,687: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,690: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,701: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:50,706: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,702: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,705: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a995acb4-4f72-48ea-a184-e0a4e8d29673] received
[2026-01-03 06:25:50,706: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[c90e63de-750f-46da-9578-4fbd7c5c3abc] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,702: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e5608e2c-f066-4184-807c-f5a6f1210bf8] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,707: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[90e07b41-5ecc-4ac9-a22e-cbe1293c8824] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,709: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[78eddf5f-1e30-43a9-916e-6a1e2956a885] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,716: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[12bb4d9b-5341-4631-a400-0833e2ee3b57] received
[2026-01-03 06:25:50,717: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[5f762db2-72d2-48fd-bd18-915e8adcae54] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,726: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:50,729: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[6020cf44-998a-4b58-9294-395eff89ae75] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,732: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba300b96-5b7a-4c2c-88aa-4243baf34563] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,791: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:50,791: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:50,819: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,085: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,828: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:50,829: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:50,832: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:50,851: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,083: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,084: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:50,821: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e30e871e-a9a7-4e3e-9ab8-2a7109ce1834] received
[2026-01-03 06:25:51,086: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,086: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,110: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,112: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,121: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,121: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,127: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[20e848b1-6886-41fc-846d-ba20103f31e0] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,131: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[84aa799b-01fc-4b8d-a6aa-1da3d64ec71f] received
[2026-01-03 06:25:51,131: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,132: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,143: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,156: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,161: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e739648e-b432-4ef2-ae35-71e7a8523888] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,161: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a61cf6c7-2fd7-46ae-9cdc-422708184a9f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,162: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,165: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,177: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,182: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,187: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:51,192: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,192: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,193: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f770a4d2-5fd0-46fe-922a-dd81339176d0] received
[2026-01-03 06:25:51,206: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,221: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,222: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,222: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,258: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:51,259: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,260: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fe582376-ea84-463b-b3c1-e82d9c0d817b] received
[2026-01-03 06:25:51,260: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[dbb97689-e548-4d98-a053-2dd3935946b0] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,262: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[983b0f2b-815c-47cd-b99c-6693d6cc2f32] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,263: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ace17981-b920-413c-9283-61266716c72e] received
[2026-01-03 06:25:51,278: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,284: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,315: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,295: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,300: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,301: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,303: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,308: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,287: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,316: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,316: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,318: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,318: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8b8c953f-02d2-4051-b07f-69f9aff109f3] received
[2026-01-03 06:25:51,318: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,318: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,319: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,319: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,328: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[552455e1-ce81-4a64-b5f9-7fd87e98927d] received
[2026-01-03 06:25:51,357: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ee7b1f98-d403-42b8-a6f9-13ee2a11caf2] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,365: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:51,365: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6c18acad-c819-42b0-b7b0-7d8a53921d34] received
[2026-01-03 06:25:51,373: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[08c97d70-d701-4d2a-9123-dc0e59970386] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,375: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,391: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ca83456e-023e-4809-8045-a4dbd88cf32b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,392: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,403: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,403: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[2a8fe019-50bf-45cc-9dbf-dbad827e941a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,426: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,427: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[976304c5-4d72-4927-b227-6b6ee76ce8a6] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,443: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[855dbb73-1415-42e9-8e65-8bf49a8a2e51] received
[2026-01-03 06:25:51,471: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,508: WARNING/MainProcess] Indexer: Generated 32 chunks (AST=False)
[2026-01-03 06:25:51,508: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,512: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,513: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,525: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,526: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,528: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,546: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,549: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,550: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,553: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,554: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,555: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,555: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[755a0e20-65ed-4658-ad1e-517f58b974b8] received
[2026-01-03 06:25:51,561: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[42929c12-9360-420b-9fbf-9f407c9a07d5] received
[2026-01-03 06:25:51,588: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,588: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,589: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,595: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a57940a5-cfa4-4747-8fe8-603fde3fa305] received
[2026-01-03 06:25:51,598: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,598: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,598: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[12835c09-0b32-4782-aa22-66e9af148f4e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,600: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,600: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[8f91fe9a-dbd7-4e55-8d78-bfd447a6a06e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,601: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[19169ea3-68d0-402a-89be-cfc371f70572] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,611: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,619: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[01502e64-ffe5-47d4-9dec-c19f8e1a8832] received
[2026-01-03 06:25:51,625: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,636: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:51,644: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,655: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:51,656: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[12560e45-3ac2-482d-96d9-0055378fce1e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,656: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,667: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,668: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,679: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,679: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,680: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,680: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,681: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,681: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,682: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bf5580cb-9008-4751-8b3d-e179a3a69799] received
[2026-01-03 06:25:51,694: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,694: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,704: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[739a2043-04bb-4c44-85b4-72e260d27dd3] succeeded in 0.03678452700000889s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:51,704: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b4724234-fd51-42b4-82bc-67a32fdcf621] received
[2026-01-03 06:25:51,707: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,712: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,712: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[6a726c6d-301b-440f-893e-2a212d5dcb23] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,722: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,722: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[44aac0c0-15ad-46fd-8e39-f7e5e6b608f8] received
[2026-01-03 06:25:51,732: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:51,732: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e57dc356-fae8-4baf-97e5-66b8bb548553] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,733: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,748: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[387f909e-21c2-4a01-9316-c9f3794bfeef] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,758: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:51,764: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9768d6d0-16de-45f9-bb90-17b9c5840ac3] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,783: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,784: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,785: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,808: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,808: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d6a11446-78a5-4ca8-8aaa-67b54ef05d4c] received
[2026-01-03 06:25:51,811: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[862c8220-ec94-4b71-80d6-a8a92f80a14f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,817: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,817: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,829: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,829: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,841: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,842: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,842: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,857: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[483cd4df-0f09-4ff7-b7a8-2bc4c808947c] received
[2026-01-03 06:25:51,871: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,875: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:51,877: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,878: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,881: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,891: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9338bba2-a85b-4cae-ba65-fbfeb6b75394] received
[2026-01-03 06:25:51,913: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:51,914: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:51,915: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b2e20fd5-5299-47a1-bf63-02fc64ba6169] received
[2026-01-03 06:25:51,929: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f5eae153-b85e-45eb-93aa-796fbbf69e1a] received
[2026-01-03 06:25:51,930: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,936: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,958: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,968: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,968: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[3973f1fe-6cd3-40d4-a58c-b156e10d8e5a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,969: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:51,969: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:51,970: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[61332a66-0024-401c-b3ab-4225be99cb68] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,001: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,002: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[aa484865-f694-462b-9a63-81200a2ddf6d] received
[2026-01-03 06:25:52,003: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:52,010: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:52,011: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,015: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,022: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,023: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,023: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[6392cd40-d034-4755-8bd1-e0e6f4d229e7] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,032: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9768a93d-0490-4cfa-bf2d-0a33715316aa] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,033: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,033: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,033: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,033: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,034: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,036: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4430fc9e-c733-456b-90ce-5f79a90c9abe] received
[2026-01-03 06:25:52,037: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,043: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0db2882e-f62b-4333-9d1f-96186177fa66] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,043: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[85ac02c3-984f-4ef0-bcde-2a5efff5c77c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,044: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,055: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,058: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,065: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8707a4da-ef9d-4721-aa92-bf9f90e6417b] received
[2026-01-03 06:25:52,087: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:52,091: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,093: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[69f1d88d-c48e-4d10-9013-0a740b796b21] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,097: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,098: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,099: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,105: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,106: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,109: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[20adc968-58ff-418a-863b-5f0b1b70f1f9] received
[2026-01-03 06:25:52,118: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,170: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,163: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,167: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:52,171: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,168: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,169: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,169: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,143: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:52,168: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,171: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,174: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[865f63a5-3316-4119-881b-1615c4a8fb86] received
[2026-01-03 06:25:52,175: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,192: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,193: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,194: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,196: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,196: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bb38ef00-09d8-42d8-80ce-651c492ef5e3] received
[2026-01-03 06:25:52,200: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e6e3e5be-6351-4baf-8d2c-e3196929e538] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,203: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[05842c31-2fc6-4ff0-a37d-4b4564c81de0] received
[2026-01-03 06:25:52,204: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[39c6b0f9-c543-4f54-9f0c-d9c583aa15db] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,204: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,205: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b88cf86f-90a2-48d8-96a3-66ca03e3d55b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,206: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,218: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[5ce9ef12-c941-461e-a537-61374a574337] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,218: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,218: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,238: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:52,238: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4988b448-3e09-4cb3-8df2-0a1ca32e843e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,242: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,243: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fe73e725-227e-4b1e-9745-00811555d7b8] received
[2026-01-03 06:25:52,255: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,255: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,267: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,268: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,280: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,280: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,280: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,280: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,293: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,331: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:52,332: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,333: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1f27eb50-cbfe-45de-908d-81115c78928c] received
[2026-01-03 06:25:52,334: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1747bb6e-0e95-4c06-90bd-560253515a5a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,337: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[73ff809d-ece6-4619-a652-a8d7899c16cd] received
[2026-01-03 06:25:52,337: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[73a90999-2c9a-45a9-8a2a-f1119b8e0327] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,338: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,340: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[831db29c-fd15-452d-9a0c-d30b8bf9c97b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,341: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,343: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,355: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,393: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:52,394: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[897e0e5f-d990-42c8-b33c-d51fa3b36061] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,431: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,440: WARNING/MainProcess] Indexer: Generated 23 chunks (AST=False)
[2026-01-03 06:25:52,441: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a4b28b29-b3bc-48e8-adfc-bc27b69e202e] received
[2026-01-03 06:25:52,445: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,446: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,458: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,459: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,459: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,459: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,459: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,471: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,474: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,483: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b6dca289-8529-4b34-a55d-2fd71920f15c] received
[2026-01-03 06:25:52,519: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,520: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,528: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,528: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[afe3e77b-aebf-4b52-87a6-f7846d38369f] received
[2026-01-03 06:25:52,534: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:52,535: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,539: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,553: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,573: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,579: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[38167076-71e0-4850-9f95-77eff0ad4918] received
[2026-01-03 06:25:52,586: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ea5df6ae-c8b2-46a3-b3c1-cca1bff13448] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,603: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[20737299-5221-48bc-a9e0-42f736143a05] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,603: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,616: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:52,642: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,647: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,654: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[eae047a6-bc88-48b6-b42b-b9bba80faf51] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,659: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f7e1edf8-31c7-45e7-b902-2ebe2d7eda1a] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,682: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:52,687: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[21df61d4-49fe-4951-9f28-71d7ec314080] received
[2026-01-03 06:25:52,735: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,804: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,815: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,816: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,831: WARNING/MainProcess] Indexer: Generated 9 chunks (AST=False)
[2026-01-03 06:25:52,835: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a995acb4-4f72-48ea-a184-e0a4e8d29673] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,838: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,840: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[91d814b3-d97c-4342-b19d-777da7a3b274] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,849: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,850: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,852: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,855: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7325f8c7-d988-4fb4-a273-4eb20878dd49] received
[2026-01-03 06:25:52,913: WARNING/MainProcess] Indexer: Generated 8 chunks (AST=False)
[2026-01-03 06:25:52,924: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:52,925: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,925: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[12bb4d9b-5341-4631-a400-0833e2ee3b57] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,925: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,961: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:52,967: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,975: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:52,976: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:52,978: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:52,979: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a31fe294-37f1-494f-b801-ebba4fcc0ab5] received
[2026-01-03 06:25:52,989: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,989: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:52,993: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,000: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,000: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,004: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,006: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,006: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,006: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3a81dc95-85ad-47e9-9253-eab65d216009] received
[2026-01-03 06:25:53,006: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6c18acad-c819-42b0-b7b0-7d8a53921d34] succeeded in 0.11830507299998771s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,032: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,035: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,040: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[e30e871e-a9a7-4e3e-9ab8-2a7109ce1834] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,042: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,043: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,044: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fce6fbbf-9493-4410-8a34-504f63b82f90] received
[2026-01-03 06:25:53,044: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,060: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,078: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:53,079: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,087: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,079: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[84aa799b-01fc-4b8d-a6aa-1da3d64ec71f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,082: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,084: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,085: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,085: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,079: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f770a4d2-5fd0-46fe-922a-dd81339176d0] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,087: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,092: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[edd3420b-b918-4384-8149-c8c043dc8d43] received
[2026-01-03 06:25:53,128: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:53,156: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,128: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[fe582376-ea84-463b-b3c1-e82d9c0d817b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,138: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,138: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,145: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[8b8c953f-02d2-4051-b07f-69f9aff109f3] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,147: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ace17981-b920-413c-9283-61266716c72e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,150: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,135: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,158: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,158: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d4fa4786-632d-47f0-b296-3f8cc5e98b48] received
[2026-01-03 06:25:53,167: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[552455e1-ce81-4a64-b5f9-7fd87e98927d] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,169: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,171: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,171: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,216: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,299: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,308: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,308: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,410: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,428: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[71d50d6c-edc3-4b6f-b206-cf82bea7e119] received
[2026-01-03 06:25:53,434: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,464: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,500: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,511: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,520: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[855dbb73-1415-42e9-8e65-8bf49a8a2e51] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,527: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4ee22a03-2392-4752-b2fb-a6b6bd0387a4] received
[2026-01-03 06:25:53,537: WARNING/MainProcess] Indexer: Generated 19 chunks (AST=False)
[2026-01-03 06:25:53,537: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[755a0e20-65ed-4658-ad1e-517f58b974b8] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,538: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,544: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[42929c12-9360-420b-9fbf-9f407c9a07d5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,573: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[44aac0c0-15ad-46fd-8e39-f7e5e6b608f8] succeeded in 0.36762347600000567s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,587: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,601: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:53,618: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:53,643: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,644: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,645: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[14d90205-709d-4e92-9a56-2ebd27684369] received
[2026-01-03 06:25:53,645: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,661: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,671: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a57940a5-cfa4-4747-8fe8-603fde3fa305] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,672: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,672: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,673: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,673: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,673: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,673: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,677: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[092d29f0-456f-4c6c-a2de-beab872a5e95] received
[2026-01-03 06:25:53,689: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:53,726: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:53,728: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,728: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,737: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[aa484865-f694-462b-9a63-81200a2ddf6d] succeeded in 0.06633749700000635s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,738: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,738: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,740: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bb1bdea3-c08b-4365-8909-9c5a12167114] received
[2026-01-03 06:25:53,740: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,741: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f5eae153-b85e-45eb-93aa-796fbbf69e1a] succeeded in 0.07157996699999103s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,742: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,745: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,749: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,749: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,749: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[bf5580cb-9008-4751-8b3d-e179a3a69799] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,749: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,751: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,751: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[db7eed8c-b7f6-4c5a-b2e5-e19da39ec5ca] received
[2026-01-03 06:25:53,752: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,764: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,769: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,792: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,770: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8707a4da-ef9d-4721-aa92-bf9f90e6417b] succeeded in 0.029595747000001893s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,774: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[01502e64-ffe5-47d4-9dec-c19f8e1a8832] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,774: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b4724234-fd51-42b4-82bc-67a32fdcf621] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,778: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,778: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,779: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,789: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f180341f-87d2-4586-9875-3086f1b0efb5] received
[2026-01-03 06:25:53,792: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,770: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,795: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,800: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d6a11446-78a5-4ca8-8aaa-67b54ef05d4c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,807: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,808: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,821: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,823: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,824: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,826: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[29d01c1e-9333-4e7b-aa54-88e9c109291d] received
[2026-01-03 06:25:53,836: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,837: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bb38ef00-09d8-42d8-80ce-651c492ef5e3] succeeded in 0.04419506400000728s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,837: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9338bba2-a85b-4cae-ba65-fbfeb6b75394] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,837: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[483cd4df-0f09-4ff7-b7a8-2bc4c808947c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,840: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,841: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,844: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,845: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[05842c31-2fc6-4ff0-a37d-4b4564c81de0] succeeded in 0.03823978600001965s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:53,847: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,847: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d3229b43-da8a-43c9-9ca6-bd7cee0c8b50] received
[2026-01-03 06:25:53,855: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,860: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b2e20fd5-5299-47a1-bf63-02fc64ba6169] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,861: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,863: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,874: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,876: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,877: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,901: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:53,904: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4430fc9e-c733-456b-90ce-5f79a90c9abe] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,905: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2873ca6d-9bba-4482-a4ed-88631a474f6b] received
[2026-01-03 06:25:53,915: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:53,915: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:53,916: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,916: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:53,917: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:53,955: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:53,985: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:53,991: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,003: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,025: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,054: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,057: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,054: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,055: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,055: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,054: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[00cdb93b-4637-4d55-a608-d0ba78e44fd6] received
[2026-01-03 06:25:54,058: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,118: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,118: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,119: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[865f63a5-3316-4119-881b-1615c4a8fb86] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,119: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[20adc968-58ff-418a-863b-5f0b1b70f1f9] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,131: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7fef6d1a-1cc9-4386-8930-325bb4144de1] received
[2026-01-03 06:25:54,131: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,131: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,132: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,132: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,138: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,172: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[fe73e725-227e-4b1e-9745-00811555d7b8] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,178: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,194: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,194: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,204: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,204: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,205: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,206: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,206: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,207: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,207: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7c56e71e-eb60-4767-82a3-696c556ab740] received
[2026-01-03 06:25:54,218: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,218: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,220: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,239: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,239: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,240: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[598a68ea-2555-499a-a44d-39a441d38a5e] received
[2026-01-03 06:25:54,249: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1f27eb50-cbfe-45de-908d-81115c78928c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,259: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,263: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3904fe90-7a1d-40cb-8fc8-a5e37986803e] received
[2026-01-03 06:25:54,264: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b6dca289-8529-4b34-a55d-2fd71920f15c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,264: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a4b28b29-b3bc-48e8-adfc-bc27b69e202e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,265: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[afe3e77b-aebf-4b52-87a6-f7846d38369f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,265: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[73ff809d-ece6-4619-a652-a8d7899c16cd] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,265: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[38167076-71e0-4850-9f95-77eff0ad4918] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,269: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,279: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,305: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,306: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:54,306: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,307: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d9ed74f6-d674-472b-912e-e2fb57a9de09] received
[2026-01-03 06:25:54,318: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,329: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,342: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,353: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,366: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,366: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,366: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,366: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,389: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,389: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,413: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,414: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[21df61d4-49fe-4951-9f28-71d7ec314080] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,426: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[089628d4-96df-4b50-8f2b-e89cfd5694a4] received
[2026-01-03 06:25:54,432: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a31fe294-37f1-494f-b801-ebba4fcc0ab5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,433: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,435: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:54,444: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,445: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,466: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,487: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:54,487: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:54,499: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,500: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,501: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[34aa3eea-9c8d-40f0-b4cc-e2d1afa71977] received
[2026-01-03 06:25:54,511: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,511: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,512: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,512: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,513: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,513: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,513: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,513: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,517: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[56548b19-0c42-49f2-bc4b-01ce6a3e46d8] received
[2026-01-03 06:25:54,544: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:54,546: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[7325f8c7-d988-4fb4-a273-4eb20878dd49] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,548: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,549: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f8948548-0c6d-4e2b-9faf-14e0433d7e12] received
[2026-01-03 06:25:54,549: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[3a81dc95-85ad-47e9-9253-eab65d216009] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,549: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[fce6fbbf-9493-4410-8a34-504f63b82f90] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,563: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,563: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,563: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,570: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,609: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,609: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,639: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,646: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:54,646: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cd46ddb8-0f88-4796-a4ed-7a50230cb224] received
[2026-01-03 06:25:54,649: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,659: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,659: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,659: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,660: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,660: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,660: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,661: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,661: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,668: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[17bee9fa-c906-486b-8e21-79f9d10eeca2] received
[2026-01-03 06:25:54,683: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,683: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,696: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[71d50d6c-edc3-4b6f-b206-cf82bea7e119] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,704: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[edd3420b-b918-4384-8149-c8c043dc8d43] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,710: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4627335a-c0b4-4c12-ba77-d39494e6407f] received
[2026-01-03 06:25:54,716: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:54,716: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4ee22a03-2392-4752-b2fb-a6b6bd0387a4] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,716: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,717: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d4fa4786-632d-47f0-b296-3f8cc5e98b48] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,717: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[14d90205-709d-4e92-9a56-2ebd27684369] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,734: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:54,788: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,734: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,737: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,747: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,748: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,749: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7bfe8ce4-68ad-44a0-ae74-bdaeb97449f1] received
[2026-01-03 06:25:54,758: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,758: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,782: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,734: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[092d29f0-456f-4c6c-a2de-beab872a5e95] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,788: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,789: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,793: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,797: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8b4b5fd8-ad16-4ad7-b20e-f39df22b4bab] received
[2026-01-03 06:25:54,816: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,824: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,830: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,831: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[bb1bdea3-c08b-4365-8909-9c5a12167114] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,841: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:54,852: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,854: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,854: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,855: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,855: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,856: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1172102d-dfa5-429b-9a5f-47ad78055ce9] received
[2026-01-03 06:25:54,860: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:54,863: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[db7eed8c-b7f6-4c5a-b2e5-e19da39ec5ca] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,867: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,868: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,869: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,869: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,872: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,874: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d3245c6b-3ec1-4087-af1b-5a477852c1d4] received
[2026-01-03 06:25:54,887: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:54,894: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:54,891: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,892: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,892: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f180341f-87d2-4586-9875-3086f1b0efb5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,893: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,891: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[29d01c1e-9333-4e7b-aa54-88e9c109291d] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,897: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2f2f1862-77dd-4a0a-9d8c-44d6162c9a72] received
[2026-01-03 06:25:54,949: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,955: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,955: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:25:54,967: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,978: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[7fef6d1a-1cc9-4386-8930-325bb4144de1] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:54,978: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:54,978: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:54,978: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,003: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:55,009: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,010: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,011: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,012: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,012: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a576ca1-d500-4b61-bf25-287dca404486] received
[2026-01-03 06:25:55,018: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,020: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,020: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,020: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,021: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[2873ca6d-9bba-4482-a4ed-88631a474f6b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,031: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c70dce59-7611-4283-b01a-1552eda176bb] received
[2026-01-03 06:25:55,045: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,049: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,052: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d3229b43-da8a-43c9-9ca6-bd7cee0c8b50] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,053: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[598a68ea-2555-499a-a44d-39a441d38a5e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,062: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,062: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[00cdb93b-4637-4d55-a608-d0ba78e44fd6] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,063: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[7c56e71e-eb60-4767-82a3-696c556ab740] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,063: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,063: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,070: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,070: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,071: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,072: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d32d2853-2845-46e7-9fe4-e72f0f7bde05] received
[2026-01-03 06:25:55,083: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,094: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,094: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,109: WARNING/MainProcess] Indexer: Generated 11 chunks (AST=False)
[2026-01-03 06:25:55,117: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,117: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,128: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,133: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:55,138: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,139: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bcd734f6-dc53-4464-8086-69ca0f6cf3a1] received
[2026-01-03 06:25:55,142: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ffb9c74c-ccae-47bb-8c1e-06655c9b0b7a] received
[2026-01-03 06:25:55,154: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,161: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,161: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,167: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,171: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:55,171: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[39d41b54-742d-4d08-a977-08b6e9b6d1d8] received
[2026-01-03 06:25:55,172: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,172: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d9ed74f6-d674-472b-912e-e2fb57a9de09] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,174: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[3904fe90-7a1d-40cb-8fc8-a5e37986803e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,174: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,176: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,176: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,179: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,190: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,194: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:55,197: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[930b51c1-e8b5-4347-9dfc-83cb8fc04b96] received
[2026-01-03 06:25:55,198: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[089628d4-96df-4b50-8f2b-e89cfd5694a4] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,202: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[34aa3eea-9c8d-40f0-b4cc-e2d1afa71977] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,219: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:55,227: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,228: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,228: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,228: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,230: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[24e3bb21-6241-44ba-a799-5e90e1b99ae8] received
[2026-01-03 06:25:55,260: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:55,263: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[56548b19-0c42-49f2-bc4b-01ce6a3e46d8] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,267: WARNING/MainProcess] Indexer: Generated 7 chunks (AST=False)
[2026-01-03 06:25:55,268: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,274: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,278: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,280: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c5a26f6-ec52-4ed3-8211-950cd8c70362] received
[2026-01-03 06:25:55,280: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,285: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4627335a-c0b4-4c12-ba77-d39494e6407f] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,285: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[7bfe8ce4-68ad-44a0-ae74-bdaeb97449f1] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,288: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,291: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,292: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,294: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,294: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,295: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0c7f6000-6348-4e5c-92b2-ec2f6fc0800b] received
[2026-01-03 06:25:55,309: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,318: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,319: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,330: WARNING/MainProcess] Indexer: Generated 242 chunks (AST=False)
[2026-01-03 06:25:55,337: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,339: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,340: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,342: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,342: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,342: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,345: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,349: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,346: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[63898038-f7ba-4b6d-ae28-89f1308e28ca] received
[2026-01-03 06:25:55,351: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f8948548-0c6d-4e2b-9faf-14e0433d7e12] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,352: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2478dd77-d066-4f7a-a7d3-0873c861172c] received
[2026-01-03 06:25:55,353: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[17bee9fa-c906-486b-8e21-79f9d10eeca2] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,354: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,355: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,357: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[cd46ddb8-0f88-4796-a4ed-7a50230cb224] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,360: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1172102d-dfa5-429b-9a5f-47ad78055ce9] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,362: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6d7a7ffa-ff0b-443c-947b-9256e279c835] received
[2026-01-03 06:25:55,363: WARNING/MainProcess] Failed to load parser for javascript: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,363: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[8b4b5fd8-ad16-4ad7-b20e-f39df22b4bab] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,364: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,369: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,370: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,373: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,374: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,375: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ffb9c74c-ccae-47bb-8c1e-06655c9b0b7a] succeeded in 0.0028168569999991178s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:55,391: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[39d41b54-742d-4d08-a977-08b6e9b6d1d8] succeeded in 0.006575656999984858s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:55,400: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[99859945-aee0-48e9-acb2-2a6f0dba7988] received
[2026-01-03 06:25:55,405: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,409: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[930b51c1-e8b5-4347-9dfc-83cb8fc04b96] succeeded in 0.012416244999997161s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:25:55,415: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,415: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,418: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,420: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,421: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,424: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,425: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,429: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0e6b8392-a117-4807-bf71-c8162bb1b95e] received
[2026-01-03 06:25:55,432: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[2f2f1862-77dd-4a0a-9d8c-44d6162c9a72] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,434: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ec00386d-a75e-415a-852b-b0c3ecf52880] received
[2026-01-03 06:25:55,435: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[24e3bb21-6241-44ba-a799-5e90e1b99ae8] succeeded in 0.021942056999989745s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:25:55,436: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a576ca1-d500-4b61-bf25-287dca404486] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,436: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d3245c6b-3ec1-4087-af1b-5a477852c1d4] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,439: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[d32d2853-2845-46e7-9fe4-e72f0f7bde05] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,439: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[c70dce59-7611-4283-b01a-1552eda176bb] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,452: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,545: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:55,545: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,552: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,589: WARNING/MainProcess] Indexer: Generated 7 chunks (AST=False)
[2026-01-03 06:25:55,599: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba058ca5-69e5-438a-bfbf-6cc163be66f5] received
[2026-01-03 06:25:55,613: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:55,614: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,626: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,637: WARNING/MainProcess] Failed to load parser for typescript: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,647: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,647: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,648: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,649: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,652: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:55,677: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3c4655b1-505b-4407-b7a7-b1926c2543bd] received
[2026-01-03 06:25:55,729: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,740: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,740: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[74081b0b-5efb-48fb-b1d5-5c5da6bb2049] received
[2026-01-03 06:25:55,754: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:55,754: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[bcd734f6-dc53-4464-8086-69ca0f6cf3a1] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,787: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,845: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:55,889: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:55,913: WARNING/MainProcess] Indexer: Generated 10 chunks (AST=False)
[2026-01-03 06:25:55,914: WARNING/MainProcess] Indexer: Generated 14 chunks (AST=False)
[2026-01-03 06:25:55,920: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0c7f6000-6348-4e5c-92b2-ec2f6fc0800b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:55,930: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[defee8e0-990d-414d-99c9-84bda39852ad] received
[2026-01-03 06:25:56,045: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,107: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,111: WARNING/MainProcess] Indexer: Generated 8 chunks (AST=False)
[2026-01-03 06:25:56,144: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,155: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,175: WARNING/MainProcess] Indexer: Generated 11 chunks (AST=False)
[2026-01-03 06:25:56,181: WARNING/MainProcess] Indexer: Generated 18 chunks (AST=False)
[2026-01-03 06:25:56,194: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,212: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,221: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,219: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,219: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[eeef10b5-4a13-453e-a36a-9eb1f4ed4fad] received
[2026-01-03 06:25:56,220: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,220: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,220: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,217: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,222: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[368344aa-d103-4190-a003-1d38f66fc02c] received
[2026-01-03 06:25:56,225: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a39fb5c9-3538-4a96-8a89-786b3a650a0e] received
[2026-01-03 06:25:56,243: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:56,244: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,245: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[07bea1c1-37b5-409a-b80b-a59301988298] received
[2026-01-03 06:25:56,249: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[714524c8-8cf2-43f1-8661-be7e1579cccc] received
[2026-01-03 06:25:56,249: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c5a26f6-ec52-4ed3-8211-950cd8c70362] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,250: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[63898038-f7ba-4b6d-ae28-89f1308e28ca] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,250: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[85a7ac7b-4b98-4977-aa49-3a5d1bbcc34b] received
[2026-01-03 06:25:56,253: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,253: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ec00386d-a75e-415a-852b-b0c3ecf52880] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,262: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,264: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,264: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,265: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,266: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,267: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,268: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,277: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,277: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,278: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a005855-b792-4791-910f-b8c588dc5e70] received
[2026-01-03 06:25:56,289: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,290: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,290: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,291: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,291: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,292: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,292: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,358: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[68abc22f-fb0c-43d8-b696-5283a250ce77] received
[2026-01-03 06:25:56,377: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[99859945-aee0-48e9-acb2-2a6f0dba7988] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,379: WARNING/MainProcess] Indexer: Generated 7 chunks (AST=False)
[2026-01-03 06:25:56,380: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0e6b8392-a117-4807-bf71-c8162bb1b95e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,382: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:56,382: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[6d7a7ffa-ff0b-443c-947b-9256e279c835] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,383: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[2478dd77-d066-4f7a-a7d3-0873c861172c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,384: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[31d061d0-cc91-47c8-8729-ec4af99b2409] received
[2026-01-03 06:25:56,385: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[3c4655b1-505b-4407-b7a7-b1926c2543bd] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,385: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba058ca5-69e5-438a-bfbf-6cc163be66f5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,401: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[74081b0b-5efb-48fb-b1d5-5c5da6bb2049] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,406: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,424: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:25:56,424: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,431: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,431: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,443: WARNING/MainProcess] Failed to load parser for typescript: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,456: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c99aa36-f818-4cee-9268-c51cfce654fc] received
[2026-01-03 06:25:56,456: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:56,469: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,496: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:56,501: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,504: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,505: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,505: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,510: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cf2663d0-3096-487d-808d-948925bda839] received
[2026-01-03 06:25:56,520: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,526: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,548: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,549: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,550: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4aa1fc33-d2e6-480e-b99f-6d81d30173c5] received
[2026-01-03 06:25:56,555: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:25:56,564: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,572: WARNING/MainProcess] Indexer: Generated 13 chunks (AST=False)
[2026-01-03 06:25:56,583: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,589: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,590: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,596: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,607: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,618: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,619: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[eeef10b5-4a13-453e-a36a-9eb1f4ed4fad] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,619: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,619: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c4d0b4a9-edd7-40ae-852f-15373d732019] received
[2026-01-03 06:25:56,630: WARNING/MainProcess] Indexer: Generated 8 chunks (AST=False)
[2026-01-03 06:25:56,631: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[defee8e0-990d-414d-99c9-84bda39852ad] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,631: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,632: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,632: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,632: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,645: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,645: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,646: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,646: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[764e2953-d951-40eb-9a78-9559148dcf24] received
[2026-01-03 06:25:56,650: WARNING/MainProcess] Indexer: Generated 17 chunks (AST=False)
[2026-01-03 06:25:56,657: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,662: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,663: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,664: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,667: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,668: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ebb37ea8-1ecc-4f79-bb1b-651bbccc43ea] received
[2026-01-03 06:25:56,674: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[85a7ac7b-4b98-4977-aa49-3a5d1bbcc34b] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,678: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a005855-b792-4791-910f-b8c588dc5e70] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,680: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[68abc22f-fb0c-43d8-b696-5283a250ce77] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,692: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[368344aa-d103-4190-a003-1d38f66fc02c] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,693: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,693: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,693: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[81f150c7-af69-4d0d-963a-e2ccf0a53156] received
[2026-01-03 06:25:56,694: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[07bea1c1-37b5-409a-b80b-a59301988298] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,695: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[714524c8-8cf2-43f1-8661-be7e1579cccc] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,696: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[31d061d0-cc91-47c8-8729-ec4af99b2409] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,699: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,700: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,708: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,720: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,731: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,732: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,733: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:25:56,769: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,783: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,783: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,786: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,812: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:25:56,813: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,819: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,836: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,855: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,857: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:25:56,858: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,858: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,858: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a39fb5c9-3538-4a96-8a89-786b3a650a0e] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,865: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:25:56,867: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4c99aa36-f818-4cee-9268-c51cfce654fc] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,870: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,871: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[81f150c7-af69-4d0d-963a-e2ccf0a53156] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,873: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,874: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:25:56,875: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[cf2663d0-3096-487d-808d-948925bda839] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,880: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,886: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,898: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,909: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,912: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 400 Bad Request"
[2026-01-03 06:25:56,912: ERROR/MainProcess] Embedding failed: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,917: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4aa1fc33-d2e6-480e-b99f-6d81d30173c5] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,918: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[764e2953-d951-40eb-9a78-9559148dcf24] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,920: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[c4d0b4a9-edd7-40ae-852f-15373d732019] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400
[2026-01-03 06:25:56,920: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ebb37ea8-1ecc-4f79-bb1b-651bbccc43ea] raised unexpected: RuntimeError("Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400")
Traceback (most recent call last):
  File "/app/src/services/inference/xinference_client.py", line 136, in embed
    response.raise_for_status()
  File "/usr/local/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 120, in ingest_file
    dense_embeddings = embed_texts(contents)
                       ^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/search/retriever.py", line 43, in embed_texts
    return client.embed(texts)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/inference/xinference_client.py", line 141, in embed
    raise RuntimeError(f"Embedding service unavailable: {e}")
RuntimeError: Embedding service unavailable: Client error '400 Bad Request' for url 'http://xinference:9997/v1/embeddings'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

/usr/local/lib/python3.11/site-packages/celery/platforms.py:841: SecurityWarning: You're running the worker with superuser privileges: this is
absolutely not recommended!

Please specify a different user using the --uid option.

User information: uid=0 euid=0 gid=0 egid=0

worker: Warm shutdown (MainProcess)
  warnings.warn(SecurityWarning(ROOT_DISCOURAGED.format(
Starting Celery worker with pool=threads, concurrency=10
 
 -------------- celery@f63ac3f32946 v5.6.1 (recovery)
--- ***** ----- 
-- ******* ---- Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.41 2026-01-03 06:27:09
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         rice_worker:0x7cb1e0d70250
- ** ---------- .> transport:   redis://redis:6379/0
- ** ---------- .> results:     redis://redis:6379/0
- *** --- * --- .> concurrency: 10 (thread)
-- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .> celery           exchange=celery(direct) key=celery
                

[tasks]
  . src.tasks.ingestion.ingest_file_task
  . src.tasks.ingestion.rebuild_index_task
  . src.worker.celery_app.echo_task

[2026-01-03 06:27:09,537: INFO/MainProcess] Connected to redis://redis:6379/0
[2026-01-03 06:27:09,540: INFO/MainProcess] mingle: searching for neighbors
[2026-01-03 06:27:10,546: INFO/MainProcess] mingle: all alone
[2026-01-03 06:27:10,554: INFO/MainProcess] celery@f63ac3f32946 ready.
[2026-01-03 06:27:25,636: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c99cb170-2952-4de8-aecf-a0ebb518105a] received
[2026-01-03 06:27:25,642: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c1cfc2ea-3e07-46c0-a598-824bd85a8996] received
[2026-01-03 06:27:25,647: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1853e421-8466-436d-a00b-bff80b839eca] received
[2026-01-03 06:27:25,653: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ed5d1935-c55d-485f-b2d2-4dec7f993c54] received
[2026-01-03 06:27:25,656: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[adf0cb48-1373-4ff3-9772-6d520dc31ed8] received
[2026-01-03 06:27:25,664: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[25383585-d154-4e27-9ae4-7570bbdbd450] received
[2026-01-03 06:27:25,672: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1e8d1026-bede-41d0-b16c-c08c6ca3892c] received
[2026-01-03 06:27:25,682: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ae317b92-fa1e-41de-8bcc-60ec2ef939e5] received
[2026-01-03 06:27:25,690: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d62e1fa8-4e12-4a36-86bd-2654a160e602] received
[2026-01-03 06:27:25,701: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8082777f-75e4-4f61-9064-f913f63c0d60] received
[2026-01-03 06:27:25,715: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6a946fa0-4ea2-4cfe-add7-38ffe4e0de25] received
[2026-01-03 06:27:25,723: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e6282b7a-aced-48d6-a90a-f12150261b4b] received
[2026-01-03 06:27:25,732: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5be24942-f763-4896-a29f-a993937ca0a0] received
[2026-01-03 06:27:25,739: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cc0e7c52-47e6-4b9d-ac2c-96c30ffc9528] received
[2026-01-03 06:27:25,744: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[37587095-7e07-487e-b288-1b0579aa7eac] received
[2026-01-03 06:27:25,753: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[85942ce2-ed64-4594-b762-349b853494d0] received
[2026-01-03 06:27:25,759: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4d4b0f8b-d1d4-4f29-bb0c-bdd87ebbb3cb] received
[2026-01-03 06:27:25,772: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f70a6e50-effa-4d61-b89f-76ff433d8aad] received
[2026-01-03 06:27:25,777: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f9f2531a-2286-40d3-a79e-a9947cd34b59] received
[2026-01-03 06:27:25,828: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0fac7d82-499a-41d0-8f78-e7c8b04980fe] received
[2026-01-03 06:27:25,888: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f312dd8c-5720-40dd-bddd-b12dfe428f22] received
[2026-01-03 06:27:25,955: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[333f7b14-4094-4034-be91-79319749b945] received
[2026-01-03 06:27:26,032: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,040: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,040: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,041: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,049: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,052: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,057: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,063: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,063: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,063: INFO/MainProcess] HTTP Request: GET http://qdrant:6333 "HTTP/1.1 200 OK"
[2026-01-03 06:27:26,131: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[377b504a-b684-4004-b48c-930ea24a33e1] received
[2026-01-03 06:27:26,147: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9de30d15-7268-45e9-a9e8-8b6b902d4e65] received
[2026-01-03 06:27:26,148: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5ca25864-f08a-43a4-89e6-3efe1998514b] received
[2026-01-03 06:27:26,149: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[01c621ce-7297-4abc-9587-e68da789f745] received
[2026-01-03 06:27:26,151: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3bb36320-0580-4c9c-b68c-1cad6f4c1ac8] received
[2026-01-03 06:27:26,169: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e326f98c-ccb5-45fa-9642-5f517236c8ad] received
[2026-01-03 06:27:26,191: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3e0f56ab-08f9-4f5d-aa21-0d30996d88e9] received
[2026-01-03 06:27:26,193: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a53402cd-337d-4c52-a069-311b71690cb1] received
[2026-01-03 06:27:26,199: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0eedcbc5-084b-4a10-aeb1-0bb86b134518] received
[2026-01-03 06:27:26,201: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4717456c-1044-4929-ae5a-0c15e2ca2ac4] received
[2026-01-03 06:27:26,207: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[956ef94f-51ac-404c-9bd0-78a6393feb19] received
[2026-01-03 06:27:26,211: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[208d2ce1-471a-427e-b2c5-ff592da78cce] received
[2026-01-03 06:27:26,215: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c2bba77c-f2e5-48d9-aee8-f1e45dc6450d] received
[2026-01-03 06:27:26,220: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e62da70d-6912-4a27-a96c-dd149ffc1c78] received
[2026-01-03 06:27:26,224: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[593a9fae-470a-434a-916d-7e31b31f7379] received
[2026-01-03 06:27:26,229: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5ad5acca-cd9a-45cc-a6ac-13517a4f7d84] received
[2026-01-03 06:27:26,233: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[670dfa53-b1d5-458d-97f3-7239ee669129] received
[2026-01-03 06:27:26,237: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[efb80d79-7be9-4188-b20b-ed5e46ec4f28] received
[2026-01-03 06:27:26,246: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cc9ed637-e612-4b59-ba1c-4a3e449450fc] received
[2026-01-03 06:27:26,257: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[86b29606-bdcb-4b37-9395-2d797e70ec4f] received
[2026-01-03 06:27:26,278: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[457b101c-b3b4-45c5-9d38-8fa4ebbdab6b] received
[2026-01-03 06:27:26,306: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0d21c62e-78b6-419c-ad7e-6757e8d546de] received
[2026-01-03 06:27:26,336: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f6f5d6ac-1f8f-41fb-9d12-2ce6eed3e6a6] received
[2026-01-03 06:27:26,337: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[604eb046-d10d-4c3a-9b0e-bfa351bc6012] received
[2026-01-03 06:27:26,338: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[43eb169c-357d-4029-a549-87718fc97a1c] received
[2026-01-03 06:27:26,338: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[acbe02a4-3e96-49c4-984d-489d8960abe4] received
[2026-01-03 06:27:26,340: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[53c2efd6-f047-4cc6-80d1-0392cf0661b8] received
[2026-01-03 06:27:26,341: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[02d93816-f244-4a0d-92e4-26190a1576f8] received
[2026-01-03 06:27:31,435: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8082777f-75e4-4f61-9064-f913f63c0d60] succeeded in 5.730785361000017s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:27:31,438: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[25383585-d154-4e27-9ae4-7570bbdbd450] succeeded in 5.773488772000007s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:27:31,442: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ed5d1935-c55d-485f-b2d2-4dec7f993c54] succeeded in 5.788547908999988s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:27:31,444: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:31,445: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:31,447: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:31,447: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:31,459: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:31,460: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:31,463: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ae317b92-fa1e-41de-8bcc-60ec2ef939e5] succeeded in 5.780217417000017s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:27:31,465: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e6282b7a-aced-48d6-a90a-f12150261b4b] succeeded in 0.026820403999977316s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:27:31,479: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cc0e7c52-47e6-4b9d-ac2c-96c30ffc9528] succeeded in 0.01562653799999225s: {'status': 'error', 'message': 'Parsing failed: partition_image() is not available because one or more dependencies are not installed. Use: pip install "unstructured[image]" (including quotes) to install the required dependencies'}
[2026-01-03 06:27:31,619: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[de141184-8973-48ea-8212-9550dad19361] received
[2026-01-03 06:27:31,620: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bf945d8f-2192-47e3-b19c-60956aef76cc] received
[2026-01-03 06:27:31,620: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[95c34498-5ba3-4e40-a0bc-6eba74f46eca] received
[2026-01-03 06:27:31,621: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[07f26520-da21-4bb1-a18c-3e16305148b9] received
[2026-01-03 06:27:31,622: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3652226b-5ee9-4b43-8925-5e721cae51d0] received
[2026-01-03 06:27:31,622: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dd42f7f6-b2bb-4875-8c05-5e8ef8f5a62c] received
[2026-01-03 06:27:31,751: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d62e1fa8-4e12-4a36-86bd-2654a160e602] succeeded in 6.059926917000041s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:31,752: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5be24942-f763-4896-a29f-a993937ca0a0] succeeded in 0.3101428980000378s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:31,753: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[37587095-7e07-487e-b288-1b0579aa7eac] succeeded in 0.28685975299998745s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:31,755: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1e8d1026-bede-41d0-b16c-c08c6ca3892c] succeeded in 6.080394328000011s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:31,756: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6a946fa0-4ea2-4cfe-add7-38ffe4e0de25] succeeded in 0.3208498239999926s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:31,758: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[adf0cb48-1373-4ff3-9772-6d520dc31ed8] succeeded in 6.100642413999992s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:31,896: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f9f2531a-2286-40d3-a79e-a9947cd34b59] succeeded in 0.1418626629999835s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,896: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f70a6e50-effa-4d61-b89f-76ff433d8aad] succeeded in 0.14378006600003346s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,897: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f312dd8c-5720-40dd-bddd-b12dfe428f22] succeeded in 0.14026406100003896s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,913: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0fac7d82-499a-41d0-8f78-e7c8b04980fe] succeeded in 0.1577814089999947s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,914: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:31,915: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:31,920: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[333f7b14-4094-4034-be91-79319749b945] succeeded in 0.16106487100000777s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,924: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[377b504a-b684-4004-b48c-930ea24a33e1] succeeded in 0.027364899000019705s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,933: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5ca25864-f08a-43a4-89e6-3efe1998514b] succeeded in 0.03551835899997968s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,937: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9de30d15-7268-45e9-a9e8-8b6b902d4e65] succeeded in 0.04012452699998903s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,957: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[01c621ce-7297-4abc-9587-e68da789f745] succeeded in 0.04332276100001309s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,965: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3bb36320-0580-4c9c-b68c-1cad6f4c1ac8] succeeded in 0.043206169999962185s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,968: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e326f98c-ccb5-45fa-9642-5f517236c8ad] succeeded in 0.04041708199997629s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,977: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3e0f56ab-08f9-4f5d-aa21-0d30996d88e9] succeeded in 0.04396604000004345s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:31,997: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:32,001: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:32,008: WARNING/MainProcess] Failed to load parser for python: __init__() takes exactly 1 argument (2 given)
[2026-01-03 06:27:32,008: WARNING/MainProcess] Failed to load parser for python: __init__() takes exactly 1 argument (2 given)
[2026-01-03 06:27:32,009: WARNING/MainProcess] Failed to load parser for python: __init__() takes exactly 1 argument (2 given)
[2026-01-03 06:27:32,049: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:32,063: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:32,107: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:32,107: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:32,176: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:32,176: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:34,441: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,441: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,441: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,441: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,442: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,442: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,443: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,443: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,444: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,453: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,455: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,457: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,463: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,469: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,471: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,472: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,476: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,477: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,478: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,492: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,498: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,499: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,499: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,501: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,518: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:27:34,520: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:34,550: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:34,551: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:34,561: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,562: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,564: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,607: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,608: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:34,609: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 404 Not Found"
[2026-01-03 06:27:34,906: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 409 Conflict"
[2026-01-03 06:27:34,907: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 409 Conflict"
[2026-01-03 06:27:34,907: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 409 Conflict"
[2026-01-03 06:27:34,907: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 409 Conflict"
[2026-01-03 06:27:34,907: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 409 Conflict"
[2026-01-03 06:27:34,907: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 409 Conflict"
[2026-01-03 06:27:34,908: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 409 Conflict"
[2026-01-03 06:27:34,908: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 409 Conflict"
[2026-01-03 06:27:34,908: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 409 Conflict"
[2026-01-03 06:27:34,921: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,938: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:34,948: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[c99cb170-2952-4de8-aecf-a0ebb518105a] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 124, in ingest_file
    self.ensure_collection()
  File "/app/src/services/ingestion/indexer.py", line 32, in ensure_collection
    self.qdrant.create_collection(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 1694, in create_collection
    return self._client.create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2023, in create_collection
    result: bool | None = self.http.collections_api.create_collection(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 294, in create_collection
    return self._build_for_create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 96, in _build_for_create_collection
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:34,949: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[208d2ce1-471a-427e-b2c5-ff592da78cce] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 124, in ingest_file
    self.ensure_collection()
  File "/app/src/services/ingestion/indexer.py", line 32, in ensure_collection
    self.qdrant.create_collection(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 1694, in create_collection
    return self._client.create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2023, in create_collection
    result: bool | None = self.http.collections_api.create_collection(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 294, in create_collection
    return self._build_for_create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 96, in _build_for_create_collection
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:34,949: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[c1cfc2ea-3e07-46c0-a598-824bd85a8996] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 124, in ingest_file
    self.ensure_collection()
  File "/app/src/services/ingestion/indexer.py", line 32, in ensure_collection
    self.qdrant.create_collection(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 1694, in create_collection
    return self._client.create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2023, in create_collection
    result: bool | None = self.http.collections_api.create_collection(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 294, in create_collection
    return self._build_for_create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 96, in _build_for_create_collection
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:34,950: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4d4b0f8b-d1d4-4f29-bb0c-bdd87ebbb3cb] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 124, in ingest_file
    self.ensure_collection()
  File "/app/src/services/ingestion/indexer.py", line 32, in ensure_collection
    self.qdrant.create_collection(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 1694, in create_collection
    return self._client.create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2023, in create_collection
    result: bool | None = self.http.collections_api.create_collection(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 294, in create_collection
    return self._build_for_create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 96, in _build_for_create_collection
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:34,951: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a53402cd-337d-4c52-a069-311b71690cb1] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 124, in ingest_file
    self.ensure_collection()
  File "/app/src/services/ingestion/indexer.py", line 32, in ensure_collection
    self.qdrant.create_collection(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 1694, in create_collection
    return self._client.create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2023, in create_collection
    result: bool | None = self.http.collections_api.create_collection(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 294, in create_collection
    return self._build_for_create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 96, in _build_for_create_collection
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:34,951: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[85942ce2-ed64-4594-b762-349b853494d0] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 124, in ingest_file
    self.ensure_collection()
  File "/app/src/services/ingestion/indexer.py", line 32, in ensure_collection
    self.qdrant.create_collection(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 1694, in create_collection
    return self._client.create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2023, in create_collection
    result: bool | None = self.http.collections_api.create_collection(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 294, in create_collection
    return self._build_for_create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 96, in _build_for_create_collection
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:34,951: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0eedcbc5-084b-4a10-aeb1-0bb86b134518] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 124, in ingest_file
    self.ensure_collection()
  File "/app/src/services/ingestion/indexer.py", line 32, in ensure_collection
    self.qdrant.create_collection(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 1694, in create_collection
    return self._client.create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2023, in create_collection
    result: bool | None = self.http.collections_api.create_collection(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 294, in create_collection
    return self._build_for_create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 96, in _build_for_create_collection
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:34,952: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[956ef94f-51ac-404c-9bd0-78a6393feb19] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 124, in ingest_file
    self.ensure_collection()
  File "/app/src/services/ingestion/indexer.py", line 32, in ensure_collection
    self.qdrant.create_collection(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 1694, in create_collection
    return self._client.create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2023, in create_collection
    result: bool | None = self.http.collections_api.create_collection(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 294, in create_collection
    return self._build_for_create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 96, in _build_for_create_collection
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:34,952: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1853e421-8466-436d-a00b-bff80b839eca] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 124, in ingest_file
    self.ensure_collection()
  File "/app/src/services/ingestion/indexer.py", line 32, in ensure_collection
    self.qdrant.create_collection(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 1694, in create_collection
    return self._client.create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 2023, in create_collection
    result: bool | None = self.http.collections_api.create_collection(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 294, in create_collection
    return self._build_for_create_collection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/collections_api.py", line 96, in _build_for_create_collection
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:34,965: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:34,965: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:34,976: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:34,979: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:34,985: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:34,987: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:34,994: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:35,015: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:35,025: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:35,031: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,029: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,029: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,030: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,030: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,031: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,028: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,033: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4717456c-1044-4929-ae5a-0c15e2ca2ac4] succeeded in 1.1253951150000034s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:35,056: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:35,061: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,062: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:35,064: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,076: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:35,076: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,077: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,090: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:35,091: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,095: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,096: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,098: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,100: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:35,109: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,110: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,111: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e62da70d-6912-4a27-a96c-dd149ffc1c78] succeeded in 0.1429537919999575s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:35,111: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,122: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:35,123: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,165: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,165: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,166: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,166: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,167: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:35,167: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,168: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,169: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,169: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,170: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,170: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,171: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,171: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,172: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,172: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,174: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,174: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,176: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,177: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:35,182: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,183: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,183: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,184: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,184: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,184: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,186: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,186: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,187: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,188: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,188: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:35,189: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,189: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:35,189: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:35,190: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,191: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:35,191: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:35,196: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c2bba77c-f2e5-48d9-aee8-f1e45dc6450d] succeeded in 0.24307871399997794s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:35,198: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,199: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,199: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,199: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,199: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,201: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,202: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:35,203: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:35,203: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,204: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,204: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:35,206: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,207: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:35,207: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,207: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,208: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,212: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,212: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[efb80d79-7be9-4188-b20b-ed5e46ec4f28] succeeded in 0.2217221029999905s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:35,214: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,215: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cc9ed637-e612-4b59-ba1c-4a3e449450fc] succeeded in 0.2204268890000094s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:35,221: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,221: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[86b29606-bdcb-4b37-9395-2d797e70ec4f] succeeded in 0.20623576899998852s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:35,234: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5ad5acca-cd9a-45cc-a6ac-13517a4f7d84] succeeded in 0.25170592900002475s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:35,234: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,235: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,237: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:35,244: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,242: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,242: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,243: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,243: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,243: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[457b101c-b3b4-45c5-9d38-8fa4ebbdab6b] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:35,240: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,244: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,246: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[593a9fae-470a-434a-916d-7e31b31f7379] succeeded in 0.26805948399999124s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:35,247: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,247: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f6f5d6ac-1f8f-41fb-9d12-2ce6eed3e6a6] succeeded in 0.1367421429999922s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:35,272: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:35,294: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,295: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,295: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,296: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:35,297: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,297: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0d21c62e-78b6-419c-ad7e-6757e8d546de] succeeded in 0.2537093870000149s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:35,298: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,299: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[670dfa53-b1d5-458d-97f3-7239ee669129] succeeded in 0.31222263000000794s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:35,299: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,303: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,316: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:35,331: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,351: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:27:35,352: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,354: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,360: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,377: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,393: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,409: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:35,417: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:35,431: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,439: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,444: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:35,477: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,488: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:35,489: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,521: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,561: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:27:35,567: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,567: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,576: WARNING/MainProcess] Indexer: Generated 32 chunks (AST=False)
[2026-01-03 06:27:35,578: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,580: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:35,581: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,581: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[604eb046-d10d-4c3a-9b0e-bfa351bc6012] succeeded in 0.37984665999999834s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:35,587: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:35,589: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,615: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:35,615: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,617: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[43eb169c-357d-4029-a549-87718fc97a1c] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:35,624: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a198207-60e0-41fc-981d-d4dd4963cb11] received
[2026-01-03 06:27:35,627: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e707262f-191e-46f1-90e0-21f1819e6db1] received
[2026-01-03 06:27:35,627: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,628: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d5ecde98-2899-41a5-bb19-82ea02667c72] received
[2026-01-03 06:27:35,629: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6e709e24-6fd7-402e-9d6b-7d6a1151082c] received
[2026-01-03 06:27:35,630: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[59ea0cb8-19bd-4dda-a641-cd029ab672fd] received
[2026-01-03 06:27:35,631: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d1633cb8-4330-479e-b1eb-d4d8811624a3] received
[2026-01-03 06:27:35,640: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6a136195-9bdf-49d6-ba74-620ce25d01d3] received
[2026-01-03 06:27:35,656: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:35,656: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:35,657: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[66fb2559-c926-4bd1-b61b-83d23aa89099] received
[2026-01-03 06:27:35,657: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[febc914c-d943-4357-8e61-776e43bd60ca] received
[2026-01-03 06:27:35,658: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[326e664d-931e-451b-8a87-aee02b97f235] received
[2026-01-03 06:27:35,659: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7ee4c24c-6471-467d-93b0-806826931c4e] received
[2026-01-03 06:27:35,660: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7cb7db7d-d594-4a4b-ab1d-24f4544f4093] received
[2026-01-03 06:27:35,660: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8012bd5b-c7d2-4252-a520-765f103906da] received
[2026-01-03 06:27:35,661: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3d6d973b-cbac-4b63-a314-136c6d2dbf98] received
[2026-01-03 06:27:35,662: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[21a2bc60-c126-40dc-8920-75703e6d7181] received
[2026-01-03 06:27:35,663: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4257b6bf-4592-496b-a777-2e2cf510e45d] received
[2026-01-03 06:27:35,664: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a87dec52-32a4-4569-b814-19fda92dedbb] received
[2026-01-03 06:27:35,665: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[afcfefa0-67d4-40ba-9694-91afa06c9d3d] received
[2026-01-03 06:27:35,666: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f34868bb-5f09-45ed-b013-f9cf81f0dcf5] received
[2026-01-03 06:27:35,667: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[af2ab604-c988-4fec-9505-c046051880dc] received
[2026-01-03 06:27:35,667: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[568f894d-54e5-4860-87c3-9d149eef84ce] received
[2026-01-03 06:27:35,668: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b5f3b6be-0fe8-4b9a-a7b0-3c187b3fbf88] received
[2026-01-03 06:27:35,669: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c1564649-8a4b-4a00-b305-cb4b9552b424] received
[2026-01-03 06:27:35,669: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8ff09c63-fb28-453a-976f-90264cc4e8cf] received
[2026-01-03 06:27:35,670: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8315ccdf-ac2b-4d42-8ce5-6e2437af29d2] received
[2026-01-03 06:27:35,671: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[31b81e33-c1cb-4b9a-961e-b04be0ac85be] received
[2026-01-03 06:27:35,671: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c0d81583-e8e2-4ff4-8321-afb81c5a24b7] received
[2026-01-03 06:27:35,672: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f373a7ca-c25e-40a6-a53d-fc9301d3a717] received
[2026-01-03 06:27:35,673: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[76357768-0a00-4965-8253-f1a998b7fd99] received
[2026-01-03 06:27:35,674: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1e8d402b-6b43-4ba0-a9c1-7357e27396fa] received
[2026-01-03 06:27:35,674: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7c080f28-6184-47f9-8797-ee90977b9f86] received
[2026-01-03 06:27:35,675: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9d231c55-0d24-42d6-a5e0-ff0e5b5ad53e] received
[2026-01-03 06:27:35,676: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d35e7850-d343-4698-967e-9b7fa51eb6ad] received
[2026-01-03 06:27:35,677: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9ccb1ff4-d811-449b-9f65-2fc1d3b4efe4] received
[2026-01-03 06:27:35,677: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[89b5bc7d-d0ce-436a-9777-bb910f8bd5dd] received
[2026-01-03 06:27:35,678: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b002c064-8f68-4e73-b279-67f29e338a01] received
[2026-01-03 06:27:35,679: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[119406cd-66a7-441e-beac-c12f8772fcaa] received
[2026-01-03 06:27:35,679: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1849ba51-49d8-48a5-bec6-199ac48abbed] received
[2026-01-03 06:27:35,680: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9120313c-96f8-4a4b-b1a3-aae93ae7f1f6] received
[2026-01-03 06:27:35,681: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[03caed53-ced7-4c5e-a46a-a14eccab9e3c] received
[2026-01-03 06:27:35,682: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[314e0157-b77a-458c-9463-208975b814c4] received
[2026-01-03 06:27:35,686: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,687: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:35,688: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,688: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:35,693: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:35,694: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:35,695: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[53c2efd6-f047-4cc6-80d1-0392cf0661b8] succeeded in 0.45591212299996187s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:35,696: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,697: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e707262f-191e-46f1-90e0-21f1819e6db1] succeeded in 0.001378789999989749s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:35,697: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:35,711: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:35,712: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,054: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,054: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,055: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,055: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,057: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,057: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,058: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:36,059: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,060: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,060: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,061: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,062: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,062: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,062: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,064: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,064: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,067: WARNING/MainProcess] Indexer: Upserting 5 points to rice_chunks...
[2026-01-03 06:27:36,067: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,068: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,069: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,070: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,073: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,083: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:36,084: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,084: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,085: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,085: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,085: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,085: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:36,085: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:36,086: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:36,088: WARNING/MainProcess] Indexer: Upserting 5 points to rice_chunks...
[2026-01-03 06:27:36,088: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,090: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,092: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,093: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,102: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[acbe02a4-3e96-49c4-984d-489d8960abe4] succeeded in 0.8636532159999888s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:36,106: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,110: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:36,112: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,112: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,115: WARNING/MainProcess] Indexer: Upserting 32 points to rice_chunks...
[2026-01-03 06:27:36,115: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,116: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,116: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:36,117: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,118: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[02d93816-f244-4a0d-92e4-26190a1576f8] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:36,135: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,136: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,137: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[95c34498-5ba3-4e40-a0bc-6eba74f46eca] succeeded in 0.8534152469999867s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:36,137: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:36,138: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:36,138: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[07f26520-da21-4bb1-a18c-3e16305148b9] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:36,139: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:36,144: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,146: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:36,146: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bf945d8f-2192-47e3-b19c-60956aef76cc] succeeded in 0.87214051899997s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:36,150: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,151: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[3652226b-5ee9-4b43-8925-5e721cae51d0] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:36,165: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,171: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,184: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:36,187: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,189: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,190: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,217: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,218: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:36,219: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,219: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,220: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[de141184-8973-48ea-8212-9550dad19361] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:36,222: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,237: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,251: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:36,251: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,251: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9a198207-60e0-41fc-981d-d4dd4963cb11] succeeded in 0.6256793219999963s: {'status': 'success', 'chunks_indexed': 4, 'mode': 'fallback'}
[2026-01-03 06:27:36,255: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,256: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,268: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dd42f7f6-b2bb-4875-8c05-5e8ef8f5a62c] succeeded in 0.6815641929999856s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:36,286: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d5ecde98-2899-41a5-bb19-82ea02667c72] succeeded in 0.589066062000029s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:36,302: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,316: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,323: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:27:36,375: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,345: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,351: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,366: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:36,374: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:36,329: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,376: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,377: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,378: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,378: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,382: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:36,383: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,385: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:36,387: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,386: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:36,386: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,390: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,393: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:36,414: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,425: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,426: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:36,427: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:36,429: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,429: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,428: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,429: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,431: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,431: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:36,433: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6e709e24-6fd7-402e-9d6b-7d6a1151082c] succeeded in 0.31957369500003097s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:36,433: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,434: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,435: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,435: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[59ea0cb8-19bd-4dda-a641-cd029ab672fd] succeeded in 0.29366929200000413s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:36,436: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,437: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,438: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,442: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,448: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,448: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d1633cb8-4330-479e-b1eb-d4d8811624a3] succeeded in 0.3048557739999751s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:36,454: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,462: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:36,464: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,465: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,465: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,484: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,484: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,485: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,485: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,485: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,485: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,487: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:36,488: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,490: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:36,490: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,491: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,493: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,493: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,494: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,494: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,497: WARNING/MainProcess] Indexer: Upserting 6 points to rice_chunks...
[2026-01-03 06:27:36,512: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:36,518: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,518: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,518: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,520: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,520: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,522: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:36,523: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,523: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,529: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,531: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,531: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4737f672-2656-4966-b06e-89b0566f0aab] received
[2026-01-03 06:27:36,534: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:36,535: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:36,535: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:36,536: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,539: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:36,541: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[66fb2559-c926-4bd1-b61b-83d23aa89099] succeeded in 0.35474852600003715s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:36,543: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:36,543: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c028b900-63b2-4799-9327-5d302a39b5dc] received
[2026-01-03 06:27:36,543: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,546: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,548: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2b284be7-8a35-4e2f-870d-14d85e847294] received
[2026-01-03 06:27:36,550: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1bf541d0-d21c-4770-b339-c0e1448d290b] received
[2026-01-03 06:27:36,550: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,551: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,557: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,557: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,558: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,559: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[326e664d-931e-451b-8a87-aee02b97f235] succeeded in 0.304572697000026s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:36,559: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,568: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,569: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,569: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a9e3c3a7-7b60-4933-8c20-2a77292148a0] received
[2026-01-03 06:27:36,583: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,584: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,590: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,595: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:36,595: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[febc914c-d943-4357-8e61-776e43bd60ca] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:36,596: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6a136195-9bdf-49d6-ba74-620ce25d01d3] succeeded in 0.4250910779999799s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:36,598: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,599: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,600: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,600: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7ee4c24c-6471-467d-93b0-806826931c4e] succeeded in 0.33142215300000544s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:36,601: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,601: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:36,601: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,602: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[be591c2f-b468-4738-a74d-efc002d37171] received
[2026-01-03 06:27:36,602: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7cb7db7d-d594-4a4b-ab1d-24f4544f4093] succeeded in 0.2934418579999942s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:36,608: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,610: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,610: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,612: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8012bd5b-c7d2-4252-a520-765f103906da] succeeded in 0.3026184280000166s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:36,612: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,615: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,627: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,638: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,639: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:36,644: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:27:36,649: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,647: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,649: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:36,646: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3b5809c1-7b20-4603-9519-e1900f268949] received
[2026-01-03 06:27:36,651: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,655: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:36,656: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,658: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:36,659: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,662: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3d6d973b-cbac-4b63-a314-136c6d2dbf98] succeeded in 0.2286381110000093s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:36,669: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,670: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,681: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1b01ceb5-2c40-4580-bc04-cb6b5f8d0767] received
[2026-01-03 06:27:36,692: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,693: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,738: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:36,738: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[99d51e79-17fd-4fd7-9392-47bf16bc2079] received
[2026-01-03 06:27:36,762: WARNING/MainProcess] Indexer: Generated 23 chunks (AST=False)
[2026-01-03 06:27:36,789: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,794: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:36,799: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[21a2bc60-c126-40dc-8920-75703e6d7181] succeeded in 0.36374424699999963s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:36,805: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,808: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:36,808: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4257b6bf-4592-496b-a777-2e2cf510e45d] succeeded in 0.3460255609999763s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:36,809: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7496bc8f-d6ef-4422-a887-5af059bb4617] received
[2026-01-03 06:27:36,810: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,810: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,814: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:36,815: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[62b10bdc-542f-44c9-8502-3fcf83b7f729] received
[2026-01-03 06:27:36,822: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c909efc6-d579-4eb1-8262-c994e4b154e4] received
[2026-01-03 06:27:36,845: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[204ded3a-c760-4511-8b63-21ceb692ebf0] received
[2026-01-03 06:27:36,858: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:27:36,859: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,864: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c8b55e5e-3a87-4926-a7ab-098e6d5ff544] received
[2026-01-03 06:27:36,891: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6f6e2725-ec10-4c27-ac91-e04ec73ef81a] received
[2026-01-03 06:27:36,897: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,910: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:36,910: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[df4649b2-b62d-4d53-b7dc-37834b458cfa] received
[2026-01-03 06:27:36,915: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:36,932: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:36,938: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fcd23f20-86bc-4f17-b042-5bdef1bf7df9] received
[2026-01-03 06:27:36,938: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:36,972: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:36,982: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d6b1c661-403d-40fa-8c98-57fe454ce692] received
[2026-01-03 06:27:37,022: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,022: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[df7992ce-05c8-4b54-a2fd-63e741b4ac50] received
[2026-01-03 06:27:37,060: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,077: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[77491822-f4f3-493d-af82-44d077f75b11] received
[2026-01-03 06:27:37,083: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a87dec52-32a4-4569-b814-19fda92dedbb] succeeded in 0.5392712820000156s: {'status': 'success', 'chunks_indexed': 4, 'mode': 'fallback'}
[2026-01-03 06:27:37,100: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,106: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba1de81e-35c0-4a1d-9b1a-8a00f4f6a13e] received
[2026-01-03 06:27:37,117: WARNING/MainProcess] Indexer: Generated 9 chunks (AST=False)
[2026-01-03 06:27:37,118: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,118: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[32ff5d55-bc6f-4128-af1d-fae213481ff4] received
[2026-01-03 06:27:37,119: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[862e6088-b4a8-45d8-b500-85520b244103] received
[2026-01-03 06:27:37,120: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[41a55ce1-28a7-45e9-b7bf-d5a2c2ac5cff] received
[2026-01-03 06:27:37,147: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0e2ee719-c0c4-4a11-9818-e5e273f2be26] received
[2026-01-03 06:27:37,164: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e70245ea-7881-41c0-a611-eaf0642f6789] received
[2026-01-03 06:27:37,174: WARNING/MainProcess] Indexer: Generated 8 chunks (AST=False)
[2026-01-03 06:27:37,175: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,250: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,251: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,251: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,252: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,253: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,253: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,253: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,254: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,255: WARNING/MainProcess] Indexer: Upserting 5 points to rice_chunks...
[2026-01-03 06:27:37,256: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,256: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,257: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,264: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,265: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,267: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:37,267: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:37,270: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,272: WARNING/MainProcess] Indexer: Upserting 23 points to rice_chunks...
[2026-01-03 06:27:37,277: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,281: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,281: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,282: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,282: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,283: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:37,283: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,284: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,284: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[afcfefa0-67d4-40ba-9694-91afa06c9d3d] succeeded in 0.7021990030000325s: {'status': 'success', 'chunks_indexed': 5, 'mode': 'fallback'}
[2026-01-03 06:27:37,285: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:37,288: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[568f894d-54e5-4860-87c3-9d149eef84ce] succeeded in 0.6801631719999932s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:37,290: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f34868bb-5f09-45ed-b013-f9cf81f0dcf5] succeeded in 0.6838418419999925s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:37,296: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,297: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,297: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,299: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,299: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,301: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c1564649-8a4b-4a00-b305-cb4b9552b424] succeeded in 0.6736503619999894s: {'status': 'success', 'chunks_indexed': 4, 'mode': 'fallback'}
[2026-01-03 06:27:37,303: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,304: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[af2ab604-c988-4fec-9505-c046051880dc] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:37,333: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:37,363: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,367: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:37,368: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,368: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,368: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,374: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,374: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7c080f28-6184-47f9-8797-ee90977b9f86] succeeded in 0.07323122200000398s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:37,377: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:27:37,377: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,377: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,379: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,379: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,381: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,382: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,383: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,385: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,385: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,386: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,390: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,411: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,417: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,425: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:37,425: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,427: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,432: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,438: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:37,460: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:27:37,460: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,461: WARNING/MainProcess] Indexer: Upserting 9 points to rice_chunks...
[2026-01-03 06:27:37,465: WARNING/MainProcess] Indexer: Upserting 6 points to rice_chunks...
[2026-01-03 06:27:37,466: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,468: WARNING/MainProcess] Indexer: Upserting 8 points to rice_chunks...
[2026-01-03 06:27:37,469: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,469: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:37,470: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,477: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,480: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,481: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:37,481: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:37,484: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,485: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,487: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:37,487: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,488: WARNING/MainProcess] Indexer: Upserting 6 points to rice_chunks...
[2026-01-03 06:27:37,491: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,493: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,493: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,494: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,495: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,495: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,495: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b5f3b6be-0fe8-4b9a-a7b0-3c187b3fbf88] succeeded in 0.8799544369999808s: {'status': 'success', 'chunks_indexed': 4, 'mode': 'fallback'}
[2026-01-03 06:27:37,497: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,497: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,498: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,500: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,503: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f373a7ca-c25e-40a6-a53d-fc9301d3a717] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:37,503: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,504: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[c0d81583-e8e2-4ff4-8321-afb81c5a24b7] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:37,504: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8315ccdf-ac2b-4d42-8ce5-6e2437af29d2] succeeded in 0.6956559470000343s: {'status': 'success', 'chunks_indexed': 9, 'mode': 'fallback'}
[2026-01-03 06:27:37,504: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,505: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[8ff09c63-fb28-453a-976f-90264cc4e8cf] succeeded in 0.8425131490000126s: {'status': 'success', 'chunks_indexed': 6, 'mode': 'fallback'}
[2026-01-03 06:27:37,506: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,506: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[31b81e33-c1cb-4b9a-961e-b04be0ac85be] succeeded in 0.6957314019999785s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:37,507: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,509: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,510: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3b402849-5c00-4e62-97ae-bc80bb611324] received
[2026-01-03 06:27:37,535: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,546: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:37,547: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,547: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,549: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:37,549: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,550: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,552: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,552: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,554: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,554: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:37,557: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[76357768-0a00-4965-8253-f1a998b7fd99] succeeded in 0.2675532970000063s: {'status': 'success', 'chunks_indexed': 6, 'mode': 'fallback'}
[2026-01-03 06:27:37,562: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[82cd788d-d9a0-4e6e-ab43-6fae091b6070] received
[2026-01-03 06:27:37,565: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:37,565: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,567: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,570: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,587: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,591: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:37,601: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,592: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:37,593: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,600: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9120313c-96f8-4a4b-b1a3-aae93ae7f1f6] succeeded in 0.051834294999991926s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:37,601: WARNING/MainProcess] Indexer: Upserting 6 points to rice_chunks...
[2026-01-03 06:27:37,591: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cb8ef07e-ec0e-4c88-b29a-5e82e338ff4f] received
[2026-01-03 06:27:37,640: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,662: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9d231c55-0d24-42d6-a5e0-ff0e5b5ad53e] succeeded in 0.29366564200000767s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:37,677: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,694: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:27:37,701: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,707: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,724: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,742: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,742: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,743: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:37,744: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,744: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1e8d402b-6b43-4ba0-a9c1-7357e27396fa] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:37,756: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f3a71708-8746-4735-bf7c-3d5818ca368b] received
[2026-01-03 06:27:37,763: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,774: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:37,795: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:37,850: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,877: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:37,882: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:27:37,919: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:37,956: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:37,971: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:37,981: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d35e7850-d343-4698-967e-9b7fa51eb6ad] succeeded in 0.5959985650000021s: {'status': 'success', 'chunks_indexed': 6, 'mode': 'fallback'}
[2026-01-03 06:27:38,009: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d0f2d9fb-9a99-44a9-b878-18b810f549f3] received
[2026-01-03 06:27:38,009: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,019: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,036: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:27:38,055: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,061: WARNING/MainProcess] Indexer: Generated 19 chunks (AST=False)
[2026-01-03 06:27:38,061: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,063: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:38,066: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,067: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,068: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0a85e26b-4367-410c-9130-4b5fcd84ac64] received
[2026-01-03 06:27:38,068: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,077: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:38,078: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,083: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:38,083: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,088: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7269799d-1aa0-499d-8387-1c8df7d37477] received
[2026-01-03 06:27:38,088: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,089: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,090: WARNING/MainProcess] Indexer: Upserting 5 points to rice_chunks...
[2026-01-03 06:27:38,092: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,092: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2b284be7-8a35-4e2f-870d-14d85e847294] succeeded in 0.02834905599996773s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:38,093: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4259c8e2-8421-4715-b6ba-62f342b89fe5] received
[2026-01-03 06:27:38,097: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,097: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,103: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[9ccb1ff4-d811-449b-9f65-2fc1d3b4efe4] succeeded in 0.6047582500000317s: {'status': 'success', 'chunks_indexed': 4, 'mode': 'fallback'}
[2026-01-03 06:27:38,106: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,107: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5f169395-3879-4766-ab95-454f8f92977f] received
[2026-01-03 06:27:38,107: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,108: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,109: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[89b5bc7d-d0ce-436a-9777-bb910f8bd5dd] succeeded in 0.600707400000033s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:38,109: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[119406cd-66a7-441e-beac-c12f8772fcaa] succeeded in 0.5732510719999482s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:38,110: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,110: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,112: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4a4e8e24-c616-4824-bb7c-b31542faaecc] received
[2026-01-03 06:27:38,115: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1849ba51-49d8-48a5-bec6-199ac48abbed] succeeded in 0.5674821049999537s: {'status': 'success', 'chunks_indexed': 5, 'mode': 'fallback'}
[2026-01-03 06:27:38,115: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,115: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,119: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,120: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1bf541d0-d21c-4770-b339-c0e1448d290b] succeeded in 0.017879323999977714s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:38,122: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[381d0109-9807-445e-abb3-bd5ed9100889] received
[2026-01-03 06:27:38,133: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,139: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[be591c2f-b468-4738-a74d-efc002d37171] succeeded in 0.027977838000026622s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:38,140: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[67a28f0d-db2b-44bc-9b08-2db740deb2ac] received
[2026-01-03 06:27:38,148: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:38,148: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,149: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:38,157: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,163: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:38,164: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,164: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,165: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[34263896-1475-47ec-81d2-b9e718dba17d] received
[2026-01-03 06:27:38,167: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b456fcfd-01bf-4542-b574-820b61572f5c] received
[2026-01-03 06:27:38,168: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7496bc8f-d6ef-4422-a887-5af059bb4617] succeeded in 0.02825936599998613s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:38,169: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3e90b8ec-986e-4121-ad91-91cf6f533176] received
[2026-01-03 06:27:38,170: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,170: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[99d51e79-17fd-4fd7-9392-47bf16bc2079] succeeded in 0.049763759000029495s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:38,173: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[53a37b4d-268e-4acc-a566-6968a32759b2] received
[2026-01-03 06:27:38,174: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,175: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cc00f967-d750-447d-a16e-ef7f6c3a8a36] received
[2026-01-03 06:27:38,183: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f506873d-c2f6-41e9-98b5-3bc69fd5c0d7] received
[2026-01-03 06:27:38,184: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:38,186: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a8195a97-36da-437e-b68e-b433b3a70fd4] received
[2026-01-03 06:27:38,194: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,207: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:38,208: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,209: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f20c8f30-42f4-494b-8f93-277053c2ed01] received
[2026-01-03 06:27:38,210: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b85e3a2d-f2c3-4e5b-8384-6ab3edfcd2c5] received
[2026-01-03 06:27:38,210: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b7912ba4-5480-4248-9db8-91d60f1b652c] received
[2026-01-03 06:27:38,211: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[27d33b16-5b6d-492f-ace3-e19c3e0ef10d] received
[2026-01-03 06:27:38,212: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ea793fe0-fcb3-4649-9459-90d2ed669e97] received
[2026-01-03 06:27:38,212: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5062f38c-88e8-4c8b-b402-379f83905417] received
[2026-01-03 06:27:38,214: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[365f3a9f-4fe9-4756-983e-4d0d22a77eba] received
[2026-01-03 06:27:38,347: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,348: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,348: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,350: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,351: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,351: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,352: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:38,353: WARNING/MainProcess] Indexer: Upserting 6 points to rice_chunks...
[2026-01-03 06:27:38,361: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,361: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,362: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[314e0157-b77a-458c-9463-208975b814c4] succeeded in 0.7221726020000006s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:38,364: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,375: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:38,375: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,375: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,376: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,377: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[03caed53-ced7-4c5e-a46a-a14eccab9e3c] succeeded in 0.8109611419999965s: {'status': 'success', 'chunks_indexed': 6, 'mode': 'fallback'}
[2026-01-03 06:27:38,377: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,410: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:38,410: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,705: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,707: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,707: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,707: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,708: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,709: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,709: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,713: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,714: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,714: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,714: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,715: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,715: WARNING/MainProcess] Indexer: Upserting 5 points to rice_chunks...
[2026-01-03 06:27:38,716: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,717: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,718: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,719: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,719: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,722: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,722: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,724: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:38,724: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,725: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:38,726: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,734: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,734: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,735: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,736: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,737: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,739: WARNING/MainProcess] Indexer: Upserting 19 points to rice_chunks...
[2026-01-03 06:27:38,743: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,744: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:38,744: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:38,753: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:38,755: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:38,756: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,757: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:38,758: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[4737f672-2656-4966-b06e-89b0566f0aab] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:38,759: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:38,760: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,761: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:38,762: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,762: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:38,763: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,764: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,766: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,768: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:38,769: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,769: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c028b900-63b2-4799-9327-5d302a39b5dc] succeeded in 0.8922633509999969s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:38,769: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,771: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,772: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:38,773: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,781: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,781: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,782: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b002c064-8f68-4e73-b279-67f29e338a01] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:38,782: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,783: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,783: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1b01ceb5-2c40-4580-bc04-cb6b5f8d0767] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:38,784: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c909efc6-d579-4eb1-8262-c994e4b154e4] succeeded in 0.6128673050000089s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:38,785: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a9e3c3a7-7b60-4933-8c20-2a77292148a0] succeeded in 0.6801664959999698s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:38,785: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,818: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:38,821: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,823: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,829: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,840: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[62b10bdc-542f-44c9-8502-3fcf83b7f729] succeeded in 0.6715095710000014s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:38,882: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:38,882: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,883: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,883: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3b5809c1-7b20-4603-9519-e1900f268949] succeeded in 0.7715513680000186s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:38,883: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,884: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,885: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[204ded3a-c760-4511-8b63-21ceb692ebf0] succeeded in 0.5225424629999793s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:38,886: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,886: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:38,886: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,889: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,892: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,928: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[c8b55e5e-3a87-4926-a7ab-098e6d5ff544] succeeded in 0.5510208260000127s: {'status': 'success', 'chunks_indexed': 4, 'mode': 'fallback'}
[2026-01-03 06:27:38,949: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:38,950: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:38,964: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:38,987: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:38,998: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,004: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,017: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,042: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,047: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:39,047: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,047: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,055: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:39,065: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,077: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,083: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,092: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,097: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,107: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:27:39,143: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:39,149: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,149: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,154: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,159: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:27:39,160: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,160: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,162: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:39,162: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,162: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,165: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:39,166: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,168: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,169: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6f6e2725-ec10-4c27-ac91-e04ec73ef81a] succeeded in 0.40457265899999584s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:39,173: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,173: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,174: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,175: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,177: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,177: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,179: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[df4649b2-b62d-4d53-b7dc-37834b458cfa] succeeded in 0.404589427000019s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:39,179: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,181: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,181: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,197: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:39,197: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fcd23f20-86bc-4f17-b042-5bdef1bf7df9] succeeded in 0.37854842000001554s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:39,208: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:39,209: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,210: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,214: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,220: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,226: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,226: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,234: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:39,235: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,235: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,236: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,236: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,237: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,237: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,243: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,250: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,251: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,252: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:39,253: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d6b1c661-403d-40fa-8c98-57fe454ce692] succeeded in 0.3854976370000145s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:39,255: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,256: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,258: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,258: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,260: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,260: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,260: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,263: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,264: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,265: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:39,265: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,266: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,267: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,270: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:39,271: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,272: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,274: WARNING/MainProcess] Indexer: Upserting 6 points to rice_chunks...
[2026-01-03 06:27:39,294: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,295: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,295: WARNING/MainProcess] Indexer: Upserting 6 points to rice_chunks...
[2026-01-03 06:27:39,302: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,317: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,318: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:39,318: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,319: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,321: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,322: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:39,322: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[77491822-f4f3-493d-af82-44d077f75b11] succeeded in 0.4427908959999627s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:39,322: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,323: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,324: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,325: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,327: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[862e6088-b4a8-45d8-b500-85520b244103] succeeded in 0.43792407199998706s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:39,328: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,329: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[32ff5d55-bc6f-4128-af1d-fae213481ff4] succeeded in 0.4414128960000312s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:39,330: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:39,330: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[df7992ce-05c8-4b54-a2fd-63e741b4ac50] succeeded in 0.45736142399999835s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:39,333: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,335: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,335: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,341: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,371: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ba1de81e-35c0-4a1d-9b1a-8a00f4f6a13e] succeeded in 0.4857358340000246s: {'status': 'success', 'chunks_indexed': 6, 'mode': 'fallback'}
[2026-01-03 06:27:39,398: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,399: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[41a55ce1-28a7-45e9-b7bf-d5a2c2ac5cff] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:39,413: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,413: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,438: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,448: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,469: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0e2ee719-c0c4-4a11-9818-e5e273f2be26] succeeded in 0.300281794s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:39,482: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:39,487: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:39,488: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,509: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:39,510: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,511: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,512: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,518: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,545: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:39,546: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,556: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,558: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,559: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,560: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,572: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,572: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,573: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,574: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:39,580: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,580: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,581: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e70245ea-7881-41c0-a611-eaf0642f6789] succeeded in 0.4012957209999968s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:39,595: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,596: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,596: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,596: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,597: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,597: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,597: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,599: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,599: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,600: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,602: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,602: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,603: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,604: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,604: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,605: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:39,611: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:39,613: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:39,618: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:39,622: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,622: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,623: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,623: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f3a71708-8746-4735-bf7c-3d5818ca368b] succeeded in 0.2953267859999755s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:39,623: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,625: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,626: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,627: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,628: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[82cd788d-d9a0-4e6e-ab43-6fae091b6070] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:39,628: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3b402849-5c00-4e62-97ae-bc80bb611324] succeeded in 0.4197609899999861s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:39,628: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cb8ef07e-ec0e-4c88-b29a-5e82e338ff4f] succeeded in 0.305269227999986s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:39,633: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,635: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,637: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,637: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,638: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,639: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,641: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,641: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,641: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,641: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,642: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,642: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,646: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,647: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,648: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,649: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,651: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,652: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,654: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,655: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,685: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,685: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,691: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,730: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:39,737: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:39,737: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,737: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,744: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,749: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:39,765: WARNING/MainProcess] Indexer: Generated 6 chunks (AST=False)
[2026-01-03 06:27:39,767: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:39,767: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,768: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:39,770: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,773: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,777: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,788: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,790: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,792: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,792: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,794: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,794: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,796: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,797: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,798: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,799: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d0f2d9fb-9a99-44a9-b878-18b810f549f3] succeeded in 0.4693539780000151s: {'status': 'success', 'chunks_indexed': 4, 'mode': 'fallback'}
[2026-01-03 06:27:39,799: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,799: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,802: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,803: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,804: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0a85e26b-4367-410c-9130-4b5fcd84ac64] succeeded in 0.47196401000002197s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:39,806: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,808: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[7269799d-1aa0-499d-8387-1c8df7d37477] succeeded in 0.43729671399995595s: {'status': 'success', 'chunks_indexed': 4, 'mode': 'fallback'}
[2026-01-03 06:27:39,808: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,811: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5f169395-3879-4766-ab95-454f8f92977f] succeeded in 0.307431538000003s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:39,813: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,814: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,814: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,814: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,818: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d58ecd2c-3539-431a-9333-a1f938eb455c] received
[2026-01-03 06:27:39,826: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,831: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,833: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,834: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,835: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,835: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,836: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,837: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4259c8e2-8421-4715-b6ba-62f342b89fe5] succeeded in 0.4175467430000026s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:39,842: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,842: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4a4e8e24-c616-4824-bb7c-b31542faaecc] succeeded in 0.26115326199999345s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:39,845: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,845: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,851: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,859: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,854: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,854: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[381d0109-9807-445e-abb3-bd5ed9100889] succeeded in 0.23005501599999434s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:39,855: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,857: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[46c5db4e-430d-4288-bf05-2218550b3866] received
[2026-01-03 06:27:39,853: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,859: WARNING/MainProcess] Failed to load parser for rust: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:39,865: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,877: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,883: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,883: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,888: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:39,889: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:39,893: WARNING/MainProcess] Indexer: Upserting 6 points to rice_chunks...
[2026-01-03 06:27:39,894: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,895: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,895: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bf7cb5ac-abe1-4808-b491-ad8846d1187c] received
[2026-01-03 06:27:39,897: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:39,903: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:39,905: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d8f71b23-dd05-4710-b2b2-42a37c34dd94] received
[2026-01-03 06:27:39,907: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,909: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,910: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[62eb664e-ee3e-4e62-aeb7-7b70613214ff] received
[2026-01-03 06:27:39,920: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,927: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,928: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,928: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,929: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[45955222-0e17-4b53-9960-98d6f4d16cc2] received
[2026-01-03 06:27:39,935: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,938: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:39,943: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,939: WARNING/MainProcess] Indexer: Generated 11 chunks (AST=False)
[2026-01-03 06:27:39,940: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,940: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,941: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[67a28f0d-db2b-44bc-9b08-2db740deb2ac] succeeded in 0.3054846520000183s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:39,942: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,942: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,938: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,943: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e8168716-9a8e-4bc7-82cc-e51609390b9d] received
[2026-01-03 06:27:39,943: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,945: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,947: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,948: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[34263896-1475-47ec-81d2-b9e718dba17d] succeeded in 0.3114943319999952s: {'status': 'success', 'chunks_indexed': 6, 'mode': 'fallback'}
[2026-01-03 06:27:39,950: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,952: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,953: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,953: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fa92a2f6-24eb-4507-a873-4388c0ee2805] received
[2026-01-03 06:27:39,955: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:39,958: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b456fcfd-01bf-4542-b574-820b61572f5c] succeeded in 0.3211906889999909s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:39,961: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,963: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ae497a96-cdfd-42f7-af0b-de445f55beb7] received
[2026-01-03 06:27:39,971: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,971: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,972: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,972: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[3e90b8ec-986e-4121-ad91-91cf6f533176] succeeded in 0.17290792299996838s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:39,975: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:39,979: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,980: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:39,980: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a1993483-6c9d-42dd-a200-61e61d480e6b] received
[2026-01-03 06:27:39,980: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:39,981: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:39,982: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:39,985: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,001: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,002: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:40,012: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,002: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:40,004: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[53a37b4d-268e-4acc-a566-6968a32759b2] succeeded in 0.19851637699997582s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:40,007: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:40,003: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0dc6b7ed-d71e-49a1-8b70-1f7979aa5690] received
[2026-01-03 06:27:40,027: WARNING/MainProcess] Indexer: Generated 7 chunks (AST=False)
[2026-01-03 06:27:40,033: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:40,037: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:27:40,038: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,039: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,041: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cc00f967-d750-447d-a16e-ef7f6c3a8a36] succeeded in 0.23217772199996034s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:40,042: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,046: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,046: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0dcce471-1d3f-45d3-953e-a79d9496cd64] received
[2026-01-03 06:27:40,048: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:40,051: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:40,051: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,052: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,056: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,059: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,059: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[1ff1a482-d2a3-49cb-bd9b-2a95ed6e4978] received
[2026-01-03 06:27:40,060: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:40,063: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:40,066: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:40,066: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a1025d31-8728-425b-b4e9-1c7df73e6cb8] received
[2026-01-03 06:27:40,070: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f506873d-c2f6-41e9-98b5-3bc69fd5c0d7] succeeded in 0.258809905000021s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:40,072: WARNING/MainProcess] Indexer: Upserting 11 points to rice_chunks...
[2026-01-03 06:27:40,083: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:40,083: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,090: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[99b76f8e-9436-499d-aa0c-5ef8f64134e2] received
[2026-01-03 06:27:40,093: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:40,093: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a8195a97-36da-437e-b68e-b433b3a70fd4] succeeded in 0.2470601460000239s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:40,094: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,099: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6142ace2-8d54-4194-9008-c8fee4575d1c] received
[2026-01-03 06:27:40,100: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ed6e4962-5477-4b7b-8157-7f0323155cdc] received
[2026-01-03 06:27:40,101: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:40,106: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a68cb50c-1dec-49bb-845f-b9ed63be380c] received
[2026-01-03 06:27:40,107: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,109: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:40,111: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ca7e7546-0ffb-461b-b7f5-32e6970c6382] received
[2026-01-03 06:27:40,120: WARNING/MainProcess] Indexer: Generated 242 chunks (AST=False)
[2026-01-03 06:27:40,121: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,121: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f89a1f38-2c82-44e6-a141-1810156a29d0] received
[2026-01-03 06:27:40,121: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:40,122: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f20c8f30-42f4-494b-8f93-277053c2ed01] succeeded in 0.2667676259999894s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:40,122: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[b85e3a2d-f2c3-4e5b-8384-6ab3edfcd2c5] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:40,123: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,124: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[355ecd04-179b-46d0-9f5f-c3b237d7262e] received
[2026-01-03 06:27:40,124: WARNING/MainProcess] Failed to load parser for javascript: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:40,134: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[66c195e8-dd12-4a6f-ae27-346299d6a540] received
[2026-01-03 06:27:40,135: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0ae4de47-659c-4e20-984d-0447cb7f9caa] received
[2026-01-03 06:27:40,141: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:40,142: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,143: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cc7d7ad9-b2e7-437f-987d-c94b5938d6f1] received
[2026-01-03 06:27:40,143: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[62eb664e-ee3e-4e62-aeb7-7b70613214ff] succeeded in 0.01405626600001142s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:40,145: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[333b8df5-7705-4176-ba22-d7b51d4b8d2a] received
[2026-01-03 06:27:40,146: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[874c9dcc-6fd0-484f-9cf9-6d3079ed3129] received
[2026-01-03 06:27:40,147: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4504bcb5-cc60-4578-b947-fd71d6341ab6] received
[2026-01-03 06:27:40,148: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e4c671ef-0c75-46ec-acd9-aed1bb1ca3c7] received
[2026-01-03 06:27:40,149: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[f60865f6-cf25-4037-b9c6-69ac4168a558] received
[2026-01-03 06:27:40,150: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6f3c458f-c57d-4af0-8576-7a4a8e0bf411] received
[2026-01-03 06:27:40,150: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cdc5f5e4-4edc-4892-a1da-c6e1b67bc831] received
[2026-01-03 06:27:40,151: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4f1221df-9797-4fdd-b8aa-5bef3a11c888] received
[2026-01-03 06:27:40,152: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[897aa028-4b45-4d17-9e06-b91aa9810726] received
[2026-01-03 06:27:40,153: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[dd5bb3b3-13b1-47c5-b6ea-bc3e178482d6] received
[2026-01-03 06:27:40,156: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2d67b116-ee28-4b54-8aa0-71992d32e36f] received
[2026-01-03 06:27:40,157: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[018540c0-ca72-45e2-9af3-637a6a9a2d51] received
[2026-01-03 06:27:40,157: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[45955222-0e17-4b53-9960-98d6f4d16cc2] succeeded in 0.01306439800004s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:40,158: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0ae797d2-6533-40e6-9e6e-461c6a690f23] received
[2026-01-03 06:27:40,161: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e8168716-9a8e-4bc7-82cc-e51609390b9d] succeeded in 0.0036263160000089556s: {'status': 'error', 'message': 'Parsing failed: Partitioning is not supported for the FileType.UNK file type.'}
[2026-01-03 06:27:40,163: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[fa92a2f6-24eb-4507-a873-4388c0ee2805] succeeded in 0.0019948920000274484s: {'status': 'skipped', 'message': 'Empty file'}
[2026-01-03 06:27:40,164: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:40,207: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:40,207: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,304: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,305: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:40,305: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,306: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,306: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:40,307: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:40,309: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,309: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:40,311: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,311: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:40,312: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[b7912ba4-5480-4248-9db8-91d60f1b652c] succeeded in 0.3674324020000199s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:40,313: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:40,313: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:40,313: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:40,338: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[27d33b16-5b6d-492f-ace3-e19c3e0ef10d] succeeded in 0.3840842890000431s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:40,351: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:40,351: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:40,352: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:40,432: WARNING/MainProcess] Indexer: Generated 7 chunks (AST=False)
[2026-01-03 06:27:40,432: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:41,619: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,621: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:41,621: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,623: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,623: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:41,623: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,624: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,624: WARNING/MainProcess] Indexer: Upserting 5 points to rice_chunks...
[2026-01-03 06:27:41,625: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:41,628: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,628: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:41,630: WARNING/MainProcess] Indexer: Upserting 7 points to rice_chunks...
[2026-01-03 06:27:41,634: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,635: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,635: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:41,635: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,636: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:41,636: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,638: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:41,638: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ea793fe0-fcb3-4649-9459-90d2ed669e97] succeeded in 1.6783840790000113s: {'status': 'success', 'chunks_indexed': 5, 'mode': 'fallback'}
[2026-01-03 06:27:41,641: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,642: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:41,643: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,644: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:41,644: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[5062f38c-88e8-4c8b-b402-379f83905417] succeeded in 1.6646076749999565s: {'status': 'success', 'chunks_indexed': 7, 'mode': 'fallback'}
[2026-01-03 06:27:41,644: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:41,645: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,648: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:41,649: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[365f3a9f-4fe9-4756-983e-4d0d22a77eba] succeeded in 1.609869257000014s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:41,650: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:41,654: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:41,664: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d58ecd2c-3539-431a-9333-a1f938eb455c] succeeded in 1.6153692089999936s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:41,696: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,704: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,704: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,704: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:41,715: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,717: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,717: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:41,728: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:41,734: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:41,770: WARNING/MainProcess] Indexer: Generated 14 chunks (AST=False)
[2026-01-03 06:27:41,793: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,793: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:41,806: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:41,850: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:41,865: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,875: WARNING/MainProcess] Indexer: Generated 10 chunks (AST=False)
[2026-01-03 06:27:41,893: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,937: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:41,955: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:41,976: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:41,983: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:41,989: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,014: WARNING/MainProcess] Indexer: Generated 18 chunks (AST=False)
[2026-01-03 06:27:42,015: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:42,080: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,095: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:42,095: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:42,111: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:42,112: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,132: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,132: WARNING/MainProcess] Indexer: Upserting 7 points to rice_chunks...
[2026-01-03 06:27:42,150: WARNING/MainProcess] Indexer: Generated 8 chunks (AST=False)
[2026-01-03 06:27:42,150: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:42,156: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:42,156: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,157: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,158: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,160: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,162: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,163: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[bf7cb5ac-abe1-4808-b491-ad8846d1187c] succeeded in 2.067603503999976s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:42,176: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,178: WARNING/MainProcess] Indexer: Upserting 242 points to rice_chunks...
[2026-01-03 06:27:42,178: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:42,200: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,212: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ae497a96-cdfd-42f7-af0b-de445f55beb7] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:42,218: WARNING/MainProcess] Failed to load parser for typescript: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:42,218: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:42,219: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a1993483-6c9d-42dd-a200-61e61d480e6b] succeeded in 1.9067177660000425s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:42,222: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:42,224: WARNING/MainProcess] Indexer: Upserting 14 points to rice_chunks...
[2026-01-03 06:27:42,256: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,281: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:42,293: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,296: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:42,297: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,299: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[d8f71b23-dd05-4710-b2b2-42a37c34dd94] succeeded in 2.1756063679999897s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:42,299: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:42,300: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[0dc6b7ed-d71e-49a1-8b70-1f7979aa5690] succeeded in 1.9564010850000386s: {'status': 'success', 'chunks_indexed': 7, 'mode': 'fallback'}
[2026-01-03 06:27:42,305: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:42,309: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:42,310: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:42,311: WARNING/MainProcess] Indexer: Upserting 10 points to rice_chunks...
[2026-01-03 06:27:42,312: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:42,329: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,351: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:42,351: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,379: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:42,381: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,393: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:42,394: WARNING/MainProcess] Indexer: Upserting 8 points to rice_chunks...
[2026-01-03 06:27:42,460: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:42,460: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,486: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:42,491: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,492: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0dcce471-1d3f-45d3-953e-a79d9496cd64] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:42,492: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[46c5db4e-430d-4288-bf05-2218550b3866] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:42,502: WARNING/MainProcess] Indexer: Upserting 18 points to rice_chunks...
[2026-01-03 06:27:42,517: WARNING/MainProcess] Indexer: Generated 11 chunks (AST=False)
[2026-01-03 06:27:42,536: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,572: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,574: WARNING/MainProcess] Indexer: Generated 7 chunks (AST=False)
[2026-01-03 06:27:42,575: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:42,576: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:42,577: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[1ff1a482-d2a3-49cb-bd9b-2a95ed6e4978] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:42,585: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,586: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:42,587: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,587: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:42,588: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:42,588: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,589: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:42,601: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:42,607: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,603: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:42,607: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,602: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:42,607: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,608: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[99b76f8e-9436-499d-aa0c-5ef8f64134e2] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:42,620: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:42,655: WARNING/MainProcess] Indexer: Generated 4 chunks (AST=False)
[2026-01-03 06:27:42,655: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[a1025d31-8728-425b-b4e9-1c7df73e6cb8] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:42,656: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:42,656: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,679: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,719: WARNING/MainProcess] Indexer: Generated 8 chunks (AST=False)
[2026-01-03 06:27:42,719: WARNING/MainProcess] Failed to load parser for tsx: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:42,724: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,724: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:42,725: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,725: WARNING/MainProcess] Failed to load parser for typescript: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:42,727: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,727: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:42,729: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:42,734: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,741: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[6142ace2-8d54-4194-9008-c8fee4575d1c] succeeded in 0.5649505680000289s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:42,742: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[a68cb50c-1dec-49bb-845f-b9ed63be380c] succeeded in 0.48500131699995563s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:42,758: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:42,763: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:42,765: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,767: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[ca7e7546-0ffb-461b-b7f5-32e6970c6382] succeeded in 0.4613948710000386s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:42,786: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:42,787: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,790: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:42,790: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,793: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:42,793: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,813: WARNING/MainProcess] Indexer: Generated 2 chunks (AST=False)
[2026-01-03 06:27:42,813: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:42,906: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,909: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:42,910: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:42,911: WARNING/MainProcess] Indexer: Upserting 11 points to rice_chunks...
[2026-01-03 06:27:42,916: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:42,924: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[ed6e4962-5477-4b7b-8157-7f0323155cdc] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:42,934: WARNING/MainProcess] Indexer: Generated 13 chunks (AST=False)
[2026-01-03 06:27:42,934: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:43,267: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,269: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,270: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,271: WARNING/MainProcess] Indexer: Upserting 7 points to rice_chunks...
[2026-01-03 06:27:43,274: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,274: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,274: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,275: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,275: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,278: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,278: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,278: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,278: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:43,281: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,281: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,283: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,283: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,284: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,285: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,287: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,287: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,288: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,297: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,299: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,300: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,303: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,304: WARNING/MainProcess] Indexer: Upserting 4 points to rice_chunks...
[2026-01-03 06:27:43,305: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,306: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f89a1f38-2c82-44e6-a141-1810156a29d0] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:43,307: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:43,307: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,310: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:43,311: WARNING/MainProcess] Indexer: Upserting 8 points to rice_chunks...
[2026-01-03 06:27:43,312: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,312: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:43,312: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:43,313: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:43,315: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,318: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:43,325: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,326: WARNING/MainProcess] Indexer: Upserting 2 points to rice_chunks...
[2026-01-03 06:27:43,329: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,329: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:43,335: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,336: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:43,338: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,343: WARNING/MainProcess] Indexer: Generated 17 chunks (AST=False)
[2026-01-03 06:27:43,343: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,344: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:43,344: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,344: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,345: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[66c195e8-dd12-4a6f-ae27-346299d6a540] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:43,345: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:43,347: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[355ecd04-179b-46d0-9f5f-c3b237d7262e] succeeded in 0.7745594269999856s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:43,347: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:43,348: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:43,349: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:43,349: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:43,350: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,356: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0ae4de47-659c-4e20-984d-0447cb7f9caa] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:43,357: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cc7d7ad9-b2e7-437f-987d-c94b5938d6f1] succeeded in 0.6841604870000424s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:43,358: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[874c9dcc-6fd0-484f-9cf9-6d3079ed3129] succeeded in 0.6169343699999672s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:43,359: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[333b8df5-7705-4176-ba22-d7b51d4b8d2a] succeeded in 0.63706907400001s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:43,359: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[e4c671ef-0c75-46ec-acd9-aed1bb1ca3c7] succeeded in 0.5796743740000352s: {'status': 'success', 'chunks_indexed': 2, 'mode': 'fallback'}
[2026-01-03 06:27:43,361: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4504bcb5-cc60-4578-b947-fd71d6341ab6] succeeded in 0.6142587929999763s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:43,362: WARNING/MainProcess] Indexer: Upserting 13 points to rice_chunks...
[2026-01-03 06:27:43,379: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:43,380: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:43,380: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:43,388: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:43,389: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:43,389: WARNING/MainProcess] Failed to load parser for python: cannot access local variable 'tree_sitter_languages' where it is not associated with a value
[2026-01-03 06:27:43,391: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:43,396: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:43,411: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,419: WARNING/MainProcess] Indexer: Generated 5 chunks (AST=False)
[2026-01-03 06:27:43,419: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:43,429: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,469: WARNING/MainProcess] Indexer: Generated 1 chunks (AST=False)
[2026-01-03 06:27:43,470: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,477: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:43,477: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,478: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:43,507: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:43,507: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,530: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,532: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,532: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,551: WARNING/MainProcess] Indexer: Generated 3 chunks (AST=False)
[2026-01-03 06:27:43,551: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[f60865f6-cf25-4037-b9c6-69ac4168a558] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:43,582: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,598: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,599: WARNING/MainProcess] Indexer: Upserting 17 points to rice_chunks...
[2026-01-03 06:27:43,600: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:43,631: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,652: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,670: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,702: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:43,726: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,737: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,738: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:43,739: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:43,739: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,753: WARNING/MainProcess] Indexer: Upserting 5 points to rice_chunks...
[2026-01-03 06:27:43,781: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,787: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,808: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,830: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:43,830: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,830: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,851: WARNING/MainProcess] Indexer: Upserting 1 points to rice_chunks...
[2026-01-03 06:27:43,858: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:43,858: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:43,880: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:43,881: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[4f1221df-9797-4fdd-b8aa-5bef3a11c888] succeeded in 0.5282251179999662s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:43,882: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:43,897: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[6f3c458f-c57d-4af0-8576-7a4a8e0bf411] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:43,933: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,933: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:43,973: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:44,022: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[dd5bb3b3-13b1-47c5-b6ea-bc3e178482d6] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException
[2026-01-03 06:27:44,028: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:44,034: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[cdc5f5e4-4edc-4892-a1da-c6e1b67bc831] succeeded in 0.6827049180000131s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:44,046: WARNING/MainProcess] Indexer: Upserting 3 points to rice_chunks...
[2026-01-03 06:27:44,057: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:44,119: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[897aa028-4b45-4d17-9e06-b91aa9810726] succeeded in 0.7413371940000388s: {'status': 'success', 'chunks_indexed': 1, 'mode': 'fallback'}
[2026-01-03 06:27:44,131: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[018540c0-ca72-45e2-9af3-637a6a9a2d51] succeeded in 0.7506009169999857s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:44,152: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 200 OK"
[2026-01-03 06:27:44,167: WARNING/MainProcess] Indexer: Upsert complete.
[2026-01-03 06:27:44,194: INFO/MainProcess] Task src.tasks.ingestion.ingest_file_task[2d67b116-ee28-4b54-8aa0-71992d32e36f] succeeded in 0.8136886670000081s: {'status': 'success', 'chunks_indexed': 3, 'mode': 'fallback'}
[2026-01-03 06:27:44,737: WARNING/MainProcess] Indexer: Generated 567 chunks (AST=False)
[2026-01-03 06:27:44,737: WARNING/MainProcess] Indexer: Embedding dense via Xinference...
[2026-01-03 06:27:47,106: INFO/MainProcess] HTTP Request: POST http://xinference:9997/v1/embeddings "HTTP/1.1 200 OK"
[2026-01-03 06:27:47,256: WARNING/MainProcess] Indexer: Dense embedding done.
[2026-01-03 06:27:47,258: INFO/MainProcess] HTTP Request: GET http://qdrant:6333/collections/rice_chunks "HTTP/1.1 200 OK"
[2026-01-03 06:27:47,290: WARNING/MainProcess] Indexer: Upserting 567 points to rice_chunks...
[2026-01-03 06:27:47,596: INFO/MainProcess] HTTP Request: PUT http://qdrant:6333/collections/rice_chunks/points?wait=true "HTTP/1.1 422 Unprocessable Entity"
[2026-01-03 06:27:47,607: ERROR/MainProcess] Task src.tasks.ingestion.ingest_file_task[0ae797d2-6533-40e6-9e6e-461c6a690f23] raised unexpected: ApiException()
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 479, in trace_task
    R = retval = fun(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/celery/app/trace.py", line 779, in __protected_call__
    return self.run(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/tasks/ingestion.py", line 46, in ingest_file_task
    return indexer.ingest_file(file_path, display_path, repo_name, org_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/services/ingestion/indexer.py", line 161, in ingest_file
    self.qdrant.upsert(
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_client.py", line 938, in upsert
    return self._client.upsert(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/qdrant_remote.py", line 1121, in upsert
    http_result = self.openapi_client.points_api.upsert_points(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 994, in upsert_points
    return self._build_for_upsert_points(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api/points_api.py", line 515, in _build_for_upsert_points
    return self.api_client.request(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 95, in request
    return self.send(request, type_)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/qdrant_client/http/api_client.py", line 130, in send
    raise UnexpectedResponse.for_response(response)
qdrant_client.http.exceptions.ApiException

/usr/local/lib/python3.11/site-packages/celery/platforms.py:841: SecurityWarning: You're running the worker with superuser privileges: this is
worker: Warm shutdown (MainProcess)
absolutely not recommended!

Please specify a different user using the --uid option.

User information: uid=0 euid=0 gid=0 egid=0

  warnings.warn(SecurityWarning(ROOT_DISCOURAGED.format(
Starting Celery worker with pool=threads, concurrency=10
 
 -------------- celery@f63ac3f32946 v5.6.1 (recovery)
--- ***** ----- 
-- ******* ---- Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.41 2026-01-03 06:34:30
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         rice_worker:0x7eba0e7193d0
- ** ---------- .> transport:   redis://redis:6379/0
- ** ---------- .> results:     redis://redis:6379/0
- *** --- * --- .> concurrency: 10 (thread)
-- ******* ---- .> task events: OFF (enable -E to monitor tasks in this worker)
--- ***** ----- 
 -------------- [queues]
                .> celery           exchange=celery(direct) key=celery
                

[tasks]
  . src.tasks.ingestion.ingest_file_task
  . src.tasks.ingestion.rebuild_index_task
  . src.worker.celery_app.echo_task

[2026-01-03 06:34:30,961: INFO/MainProcess] Connected to redis://redis:6379/0
[2026-01-03 06:34:30,963: INFO/MainProcess] mingle: searching for neighbors
[2026-01-03 06:34:31,971: INFO/MainProcess] mingle: all alone
[2026-01-03 06:34:31,982: INFO/MainProcess] celery@f63ac3f32946 ready.
