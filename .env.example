# Rice Search Platform - Environment Configuration

# ============================================
# HuggingFace (optional, for private models)
# ============================================
HF_TOKEN=

# ============================================
# Repository paths for server-side indexing
# ============================================
REPOS_PATH=./repos

# ============================================
# Model Configuration (Infinity)
# ============================================
# Embedding Models (code-optimized):
#   - jinaai/jina-code-embeddings-1.5b (1536d, Rust/Kotlin/15+ langs) [DEFAULT]
#   - jinaai/jina-code-embeddings-0.5b (1536d, smaller/faster)
#   - nomic-ai/nomic-embed-code (896d, Python/Java/JS/PHP/Ruby/Go only)
#   - mixedbread-ai/mxbai-embed-large-v1 (1024d, general purpose)
EMBED_MODEL=jinaai/jina-code-embeddings-1.5b
EMBEDDING_DIM=1536

# Reranking Models (code-optimized):
#   - jinaai/jina-reranker-v2-base-multilingual (60-80ms, code support) [DEFAULT]
#   - BAAI/bge-reranker-v2-m3 (70-100ms, multilingual)
#   - mixedbread-ai/mxbai-rerank-xsmall-v1 (320ms, general purpose)
RERANK_MODEL=jinaai/jina-reranker-v2-base-multilingual

# Infinity engine: torch (default) | onnx | tensorrt
INFINITY_ENGINE=torch
INFINITY_BATCH_SIZE=32

# ============================================
# Search Configuration
# ============================================
SPARSE_TOPK=100
DENSE_TOPK=100
FINAL_TOPK=20
RRF_K=60

# Reranking
RERANK_ENABLED=true
RERANK_CANDIDATES=30
RERANK_TIMEOUT_MS=100

# ============================================
# API Configuration
# ============================================
AUTH_MODE=none
LOG_LEVEL=INFO

# ============================================
# File Indexing Limits
# ============================================
MAX_FILE_SIZE_MB=10
MAX_FILES_PER_BATCH=100

# ============================================
# Infrastructure (usually don't need to change)
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
MILVUS_HOST=milvus
MILVUS_PORT=19530
