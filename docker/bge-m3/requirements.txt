# BGE-M3 Embedding Service - Latest Stable Dependencies
# Updated: Dec 2025

# ============================================
# Web Framework (Latest Stable)
# ============================================
fastapi==0.115.6
uvicorn[standard]==0.34.0
starlette==0.41.3

# ============================================
# Core ML Frameworks (Order matters!)
# ============================================
# PyTorch 2.5.1 (latest stable, Dec 2025)
torch==2.5.1
torchvision==0.20.1

# HuggingFace stack - latest stable versions
transformers==4.47.1
huggingface-hub==0.27.1
safetensors==0.5.1
tokenizers==0.21.0

# Sentence transformers (latest stable)
sentence-transformers==3.3.1

# FlagEmbedding 1.3.5 (latest stable for BGE-M3)
# - Supports transformers>=4.44.2 (no strict pinning)
# - Compatible with transformers 4.47.x
FlagEmbedding==1.3.5

# ============================================
# Model Optimization (Latest Stable)
# ============================================
accelerate==1.2.1
peft==0.14.0

# ============================================
# Data Processing (Latest Stable)
# ============================================
numpy==2.2.1
scipy==1.15.0
scikit-learn==1.6.0

# ============================================
# Validation & Serialization (Latest Stable)
# ============================================
pydantic==2.10.4

# ============================================
# Text Processing (Latest Stable)
# ============================================
sentencepiece==0.2.0
protobuf==5.29.2
regex==2024.11.6

# ============================================
# Utilities (Latest Stable)
# ============================================
requests==2.32.3
tqdm==4.67.1
filelock==3.16.1
packaging==24.2

# ============================================
# Type Hints (Latest Stable)
# ============================================
typing_extensions==4.12.2

# ============================================
# HTTP/Async (Latest Stable)
# ============================================
httpx==0.28.1
anyio==4.8.0
